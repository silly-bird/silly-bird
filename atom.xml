<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lee&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-07-11T02:03:04.409Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Lee&#39;s Blog</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MySQL在命令提示符中无法连接</title>
    <link href="http://yoursite.com/2019/07/11/mysql_cmd/"/>
    <id>http://yoursite.com/2019/07/11/mysql_cmd/</id>
    <published>2019-07-10T16:00:00.000Z</published>
    <updated>2019-07-11T02:03:04.409Z</updated>
    
    <content type="html"><![CDATA[<h4 id="错误信息"><a href="#错误信息" class="headerlink" title="错误信息"></a>错误信息</h4><blockquote><p>‘mysql’ 不是内部或外部命令，也不是可运行的程序<br>或批处理文件。</p></blockquote><p><img src="https://i.loli.net/2019/07/11/5d26949bb3f4979888.png" alt></p><a id="more"></a><h4 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h4><blockquote><p>没有配置mysql的环境变量，类似jdk环境变量的配置</p></blockquote><p><img src="https://i.loli.net/2019/07/11/5d2696d68790789655.png" alt></p><p><img src="https://i.loli.net/2019/07/11/5d2696ff5c66a93963.png" alt></p><p><img src="https://i.loli.net/2019/07/11/5d26979a23bdc35057.png" alt></p><h4 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h4><p><img src="https://i.loli.net/2019/07/11/5d26986d020b732530.png" alt></p><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;错误信息&quot;&gt;&lt;a href=&quot;#错误信息&quot; class=&quot;headerlink&quot; title=&quot;错误信息&quot;&gt;&lt;/a&gt;错误信息&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;‘mysql’ 不是内部或外部命令，也不是可运行的程序&lt;br&gt;或批处理文件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/07/11/5d26949bb3f4979888.png&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="http://yoursite.com/categories/MySQL/"/>
    
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL5.5 ---2003错误</title>
    <link href="http://yoursite.com/2019/07/11/mysql5.5-2003/"/>
    <id>http://yoursite.com/2019/07/11/mysql5.5-2003/</id>
    <published>2019-07-10T16:00:00.000Z</published>
    <updated>2019-07-11T02:02:58.812Z</updated>
    
    <content type="html"><![CDATA[<h4 id="错误信息"><a href="#错误信息" class="headerlink" title="错误信息"></a>错误信息</h4><p><img src="https://i.loli.net/2019/07/11/5d268f0b4aa0069750.png" alt><br><a id="more"></a></p><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><blockquote><p>找到MySQL的安装目录<br>找到bin目录下的mysqld.exe</p></blockquote><p><img src="https://i.loli.net/2019/07/11/5d26901b8e05611527.png" alt></p><blockquote><p>双击运行，在MySQL5.5 Command Line Client,输入账号密码就可以使用了</p></blockquote><p><img src="https://i.loli.net/2019/07/11/5d2690e8aad1e52748.png" alt></p><h4 id="分析问题"><a href="#分析问题" class="headerlink" title="分析问题"></a>分析问题</h4><blockquote><p>出现这个问题是在我卸载了MySQL57后出现的，在任务管理器-&gt;服务 中找不到MySQL（MySQL5.5）。MySQL57依旧存在，可能注册表没有删除干净造成。<br>每次开启后问题依旧在，还需要按上述步骤开启mysqld.exe</p></blockquote><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;错误信息&quot;&gt;&lt;a href=&quot;#错误信息&quot; class=&quot;headerlink&quot; title=&quot;错误信息&quot;&gt;&lt;/a&gt;错误信息&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/07/11/5d268f0b4aa0069750.png&quot; alt&gt;&lt;br&gt;
    
    </summary>
    
      <category term="MySQL" scheme="http://yoursite.com/categories/MySQL/"/>
    
    
      <category term="MySQL5.5" scheme="http://yoursite.com/tags/MySQL5-5/"/>
    
      <category term="MySQL 2003错误" scheme="http://yoursite.com/tags/MySQL-2003%E9%94%99%E8%AF%AF/"/>
    
  </entry>
  
  <entry>
    <title>FTP文件夹错误</title>
    <link href="http://yoursite.com/2019/07/08/ftp-document-error/"/>
    <id>http://yoursite.com/2019/07/08/ftp-document-error/</id>
    <published>2019-07-08T05:54:14.855Z</published>
    <updated>2019-07-08T08:46:28.607Z</updated>
    
    <content type="html"><![CDATA[<h3 id="错误信息"><a href="#错误信息" class="headerlink" title="错误信息"></a>错误信息</h3><p><img src="https://i.loli.net/2019/07/08/5d22dc90f2b0495525.png" alt></p><h3 id="什么是ftp"><a href="#什么是ftp" class="headerlink" title="什么是ftp"></a>什么是ftp</h3><p>文件传输协议（File Transfer Protocol，FTP）是用于在网络上进行文件传输的一套标准协议，它工作在 OSI 模型的第七层， TCP 模型的第四层， 即应用层， 使用 TCP 传输而不是 UDP， 客户在和服务器建立连接前要经过一个“三次握手”的过程， 保证客户与服务器之间的连接是可靠的， 而且是面向连接， 为数据传输提供可靠保证。<br>FTP允许用户以文件操作的方式（如文件的增、删、改、查、传送等）与另一主机相互通信。然而， 用户并不真正登录到自己想要存取的计算机上面而成为完全用户， 可用FTP程序访问远程资源， 实现用户往返传输文件、目录管理以及访问电子邮件等等， 即使双方计算机可能配有不同的操作系统和文件存储方式。<br><a id="more"></a></p><h3 id="临时解决无法打开问题"><a href="#临时解决无法打开问题" class="headerlink" title="临时解决无法打开问题"></a>临时解决无法打开问题</h3><p>首先，移步浏览器，在浏览器里输入你想访问的地址，出现如下类似的结果:<br><img src="https://i.loli.net/2019/07/08/5d22de219d0a948328.png" alt></p><h3 id="解决ftp文件夹错误"><a href="#解决ftp文件夹错误" class="headerlink" title="解决ftp文件夹错误"></a>解决ftp文件夹错误</h3><blockquote><p>打开控制面板<br>分别找到：</p><ul><li>Internet选项</li><li>程序和功能</li><li>Windows Defender 防火墙</li></ul></blockquote><h4 id="修改Internet选项"><a href="#修改Internet选项" class="headerlink" title="修改Internet选项"></a>修改Internet选项</h4><p><img src="https://i.loli.net/2019/07/08/5d22ff103073021905.png" alt></p><h4 id="修改程序和功能"><a href="#修改程序和功能" class="headerlink" title="修改程序和功能"></a>修改程序和功能</h4><p><img src="https://i.loli.net/2019/07/08/5d22ff52f33c595396.png" alt></p><h4 id="修改Windows-Defender-防火墙"><a href="#修改Windows-Defender-防火墙" class="headerlink" title="修改Windows Defender 防火墙"></a>修改Windows Defender 防火墙</h4><p><img src="https://i.loli.net/2019/07/08/5d22ffa8e539848867.png" alt></p><h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p><img src="https://i.loli.net/2019/07/08/5d2300146808553995.png" alt></p><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;错误信息&quot;&gt;&lt;a href=&quot;#错误信息&quot; class=&quot;headerlink&quot; title=&quot;错误信息&quot;&gt;&lt;/a&gt;错误信息&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/07/08/5d22dc90f2b0495525.png&quot; alt&gt;&lt;/p&gt;
&lt;h3 id=&quot;什么是ftp&quot;&gt;&lt;a href=&quot;#什么是ftp&quot; class=&quot;headerlink&quot; title=&quot;什么是ftp&quot;&gt;&lt;/a&gt;什么是ftp&lt;/h3&gt;&lt;p&gt;文件传输协议（File Transfer Protocol，FTP）是用于在网络上进行文件传输的一套标准协议，它工作在 OSI 模型的第七层， TCP 模型的第四层， 即应用层， 使用 TCP 传输而不是 UDP， 客户在和服务器建立连接前要经过一个“三次握手”的过程， 保证客户与服务器之间的连接是可靠的， 而且是面向连接， 为数据传输提供可靠保证。&lt;br&gt;FTP允许用户以文件操作的方式（如文件的增、删、改、查、传送等）与另一主机相互通信。然而， 用户并不真正登录到自己想要存取的计算机上面而成为完全用户， 可用FTP程序访问远程资源， 实现用户往返传输文件、目录管理以及访问电子邮件等等， 即使双方计算机可能配有不同的操作系统和文件存储方式。&lt;br&gt;
    
    </summary>
    
      <category term="FTP" scheme="http://yoursite.com/categories/FTP/"/>
    
    
      <category term="FTP文件夹错误" scheme="http://yoursite.com/tags/FTP%E6%96%87%E4%BB%B6%E5%A4%B9%E9%94%99%E8%AF%AF/"/>
    
  </entry>
  
  <entry>
    <title>java商城项目（六）——订单与支付</title>
    <link href="http://yoursite.com/2019/06/20/estoresix/"/>
    <id>http://yoursite.com/2019/06/20/estoresix/</id>
    <published>2019-06-19T16:00:00.000Z</published>
    <updated>2019-06-30T03:15:04.050Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前台页面"><a href="#前台页面" class="headerlink" title="前台页面"></a>前台页面</h3><ul><li>/estore/WebRoot/orders_detail.jsp</li><li>/estore/WebRoot/orders.jsp</li><li>/estore/WebRoot/orders_submit.jsp</li><li>/estore/WebRoot/pay_success.jsp</li></ul><a id="more"></a><h4 id="entity"><a href="#entity" class="headerlink" title="entity"></a>entity</h4><h5 id="Orders-java"><a href="#Orders-java" class="headerlink" title="Orders.java"></a>Orders.java</h5><pre><code>package xyz.ljcn.entity;import java.util.Date;import java.util.List;public class Orders {    private String id; // 订单编号    private Integer uid;    private Double totalprice;    private String address;    private Integer status; // 1:待付款 2：已付款 3：已过期    private Date createtime;    // 订单 -- 订单明细 1：n 因此可以在订单对象中添加订单明细的集合    private List&lt;OrdersItem&gt; list;    public List&lt;OrdersItem&gt; getList() {        return list;    }    public void setList(List&lt;OrdersItem&gt; list) {        this.list = list;    }    public String getId() {        return id;    }    public void setId(String id) {        this.id = id;    }    public Integer getUid() {        return uid;    }    public void setUid(Integer uid) {        this.uid = uid;    }    public Double getTotalprice() {        return totalprice;    }    public void setTotalprice(Double totalprice) {        this.totalprice = totalprice;    }    public String getAddress() {        return address;    }    public void setAddress(String address) {        this.address = address;    }    public Integer getStatus() {        return status;    }    public void setStatus(Integer status) {        this.status = status;    }    public Date getCreatetime() {        return createtime;    }    public void setCreatetime(Date createtime) {        this.createtime = createtime;    }    @Override    public String toString() {        return &quot;Orders [id=&quot; + id + &quot;, uid=&quot; + uid + &quot;, totalprice=&quot; + totalprice + &quot;, address=&quot; + address + &quot;, status=&quot;                + status + &quot;, createtime=&quot; + createtime + &quot;, list=&quot; + list + &quot;]&quot;;    }    public Orders() {        super();    }    public Orders(String id, Integer uid, Double totalprice, String address, Integer status, Date createtime) {        super();        this.id = id;        this.uid = uid;        this.totalprice = totalprice;        this.address = address;        this.status = status;        this.createtime = createtime;    }}</code></pre><h5 id="OrdersItem"><a href="#OrdersItem" class="headerlink" title="OrdersItem"></a>OrdersItem</h5><pre><code>package xyz.ljcn.entity;public class OrdersItem {    private String oid;    private Integer gid;    private Integer buynum;    // 订单明细和商品之间是 1:1关系，因此可以在订单明细对象中添加商品对象    private Goods goods;    public Goods getGoods() {        return goods;    }    public void setGoods(Goods goods) {        this.goods = goods;    }    public OrdersItem() {        super();    }    public OrdersItem(String oid, Integer gid, Integer buynum) {        super();        this.oid = oid;        this.gid = gid;        this.buynum = buynum;    }    public String getOid() {        return oid;    }    public void setOid(String oid) {        this.oid = oid;    }    public Integer getGid() {        return gid;    }    public void setGid(Integer gid) {        this.gid = gid;    }    public Integer getBuynum() {        return buynum;    }    public void setBuynum(Integer buynum) {        this.buynum = buynum;    }    @Override    public String toString() {        return &quot;OrdersItem [oid=&quot; + oid + &quot;, gid=&quot; + gid + &quot;, buynum=&quot; + buynum                + &quot;, goods=&quot; + goods + &quot;]&quot;;    }}</code></pre><h4 id="servlet"><a href="#servlet" class="headerlink" title="servlet"></a>servlet</h4><h5 id="OrdersServlet"><a href="#OrdersServlet" class="headerlink" title="OrdersServlet"></a>OrdersServlet</h5><pre><code>package xyz.ljcn.servlet;import java.io.IOException;import java.util.HashMap;import java.util.List;import java.util.Map;import java.util.UUID;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.apache.commons.dbutils.QueryRunner;import org.apache.commons.dbutils.handlers.MapListHandler;import org.apache.commons.lang3.StringUtils;import com.github.wxpay.sdk.MyConfig;import com.github.wxpay.sdk.WXPay;import com.google.gson.Gson;import redis.clients.jedis.Jedis;import xyz.ljcn.constants.Constants;import xyz.ljcn.entity.Cart;import xyz.ljcn.entity.Orders;import xyz.ljcn.entity.User;import xyz.ljcn.service.CartService;import xyz.ljcn.service.OrdersService;import xyz.ljcn.service.Impl.OrdersServiceProxy;import xyz.ljcn.utils.BeanFactory;import xyz.ljcn.utils.JDBCUtils;import xyz.ljcn.utils.JedisUtils;@SuppressWarnings(&quot;all&quot;)@WebServlet(&quot;/orders&quot;)public class OrdersServlet extends BaseServlet {    CartService cartService = BeanFactory.getBean(CartService.class);    //OrdersService service = BeanFactory.getBean(OrdersService.class);    // 使用代理类    OrdersService service = OrdersServiceProxy.createOrdersServiceProxy();    public void getStatus(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        // 判断是否登录        User user = isLogin(req, resp);        if ( user != null ) {    WXPay wxpay = null;            try {                wxpay = new WXPay();                Map&lt;String, String&gt; data = new HashMap&lt;String, String&gt;();        String oid = req.getParameter(&quot;id&quot;);        data.put(&quot;out_trade_no&quot;, oid);        Map&lt;String, String&gt; result = wxpay.orderQuery(data);        // 获取交易状态        String trade_state = result.get(&quot;trade_state&quot;);        if ( &quot;SUCCESS&quot;.equalsIgnoreCase(trade_state) ) {            // 修改订单状态为已支付            Integer uid = user.getId();            service.changeStatus(oid, uid, Constants.STATUS_ORDER.PAY);        }    resp.getWriter().write(trade_state);            } catch (Exception e1) {                e1.printStackTrace();            }        } else {            resp.getWriter().write(&quot;nologin&quot;);        }    }    public void getPayUrl(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        // 判断是否登录        User user = isLogin(req, resp);        if ( user != null ) {            // 订单id            String id = req.getParameter(&quot;id&quot;);    try {        Orders orders = service.get(id, user.getId());        // 计算价格总共多少分        Double totalprice = orders.getTotalprice() * 100;        String total_fee = totalprice.intValue() + &quot;&quot;;                WXPay wxpay = new WXPay();                Map&lt;String, String&gt; data = new HashMap&lt;String, String&gt;();        data.put(&quot;body&quot;, &quot;xxx-扫码支付中心&quot;);//微信支付实现参照后面的博客        data.put(&quot;out_trade_no&quot;, id);        //data.put(&quot;device_info&quot;, &quot;&quot;);        //data.put(&quot;fee_type&quot;, &quot;CNY&quot;);        data.put(&quot;total_fee&quot;, total_fee);        data.put(&quot;spbill_create_ip&quot;, &quot;127.0.0.1&quot;);        data.put(&quot;notify_url&quot;, &quot;http://www.example.com/wxpay/notify&quot;);        data.put(&quot;trade_type&quot;, &quot;NATIVE&quot;);  // 此处指定为扫码支付        //data.put(&quot;product_id&quot;, &quot;12&quot;);        Map&lt;String, String&gt; result = wxpay.unifiedOrder(data);        String code_url = result.get(&quot;code_url&quot;);    resp.getWriter().write(code_url);            } catch (Exception e) {                e.printStackTrace();            }        }    }    public void detail(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        // 判断是否登录        User user = isLogin(req, resp);        if ( user != null ) {            // 订单号            String oid = req.getParameter(&quot;id&quot;);            Integer uid = user.getId();            // 为了保证安全性，在对用户数据进行操作时，需要把用户的id也作为sql的条件            Orders orders = service.get(oid, uid);            req.setAttribute(&quot;orders&quot;, orders);            req.getRequestDispatcher(&quot;/orders_detail.jsp&quot;).forward(req, resp);        }    }    public void cancel(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        // 判断是否登录        User user = isLogin(req, resp);        if ( user != null ) {            // 订单号            String oid = req.getParameter(&quot;id&quot;);            Integer uid = user.getId();            // 为了保证安全性，在对用户数据进行操作时，需要把用户的id也作为sql的条件            service.cancel(oid, uid);        }    }    public void query(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        // 判断是否登录        User user = isLogin(req, resp);        if ( user != null ) {            List&lt;Orders&gt; oList = service.query(user.getId());            req.setAttribute(&quot;oList&quot;, oList);            req.getRequestDispatcher(&quot;/orders.jsp&quot;).forward(req, resp);        }    }    public void addOrders(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        // 判断是否登录        User user = isLogin(req, resp);        if ( user != null ) {            // 获取收货地址信息            String pp = req.getParameter(&quot;pp&quot;);            String cc = req.getParameter(&quot;cc&quot;);            String dd = req.getParameter(&quot;dd&quot;);            String detailAddress = req.getParameter(&quot;detailAddress&quot;);            String zipcode = req.getParameter(&quot;zipcode&quot;);            String name = req.getParameter(&quot;name&quot;);            String tel = req.getParameter(&quot;tel&quot;);            String address = pp + cc + dd + &quot; &quot; + detailAddress + &quot; 收件人：&quot; + name + &quot; 手机号：&quot; + tel;            Integer uid = user.getId();            service.addOrders(uid, address);            // 跳转到查询订单列表页面            resp.sendRedirect(req.getContextPath() + &quot;/orders?method=query&quot;);        }    }    public void loadSSX(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        try {            // 将省市县的数据保存到redis缓存中，请求地址作为key            String uri = req.getRequestURI(); // uri中不包含请求参数            // 获取请求参数            String queryString = req.getQueryString();            if ( StringUtils.isNotBlank(queryString) ) {                uri += &quot;?&quot; + queryString;            }            Jedis j = JedisUtils.getJedis();            String json = j.get(uri);            if ( StringUtils.isBlank(json) ) {                String pid = req.getParameter(&quot;pid&quot;);                QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());                String sql = &quot;select * from `province_city_district` where pid=?&quot;;                List&lt;Map&lt;String, Object&gt;&gt; listMap = qr.query(sql, new MapListHandler(), pid);                Gson gson = new Gson();                json = gson.toJson(listMap);                j.set(uri, json);            }            resp.getWriter().write(json);        } catch (Exception e) {            e.printStackTrace();            throw new RuntimeException(&quot;...&quot;);        }    }    public void toOrders(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        User user = isLogin(req, resp);        if ( user != null ) {            Integer uid = user.getId();            Cart cart = new Cart();            cart.setUid(uid);            List&lt;Cart&gt; cList = cartService.queryWithGoods(cart);            req.setAttribute(&quot;cList&quot;, cList);            req.getRequestDispatcher(&quot;/orders_submit.jsp&quot;).forward(req, resp);        }    }}</code></pre><h5 id="OrdersService"><a href="#OrdersService" class="headerlink" title="OrdersService"></a>OrdersService</h5><pre><code>package xyz.ljcn.service;import java.util.List;import xyz.ljcn.entity.Orders;public interface OrdersService {    void addOrders(Integer uid, String address);    List&lt;Orders&gt; query(Integer id);    void cancel(String oid, Integer uid);    Orders get(String oid, Integer uid);    void changeStatus(String oid, Integer uid, int pay);}</code></pre><h5 id="OrdersServiceImpl"><a href="#OrdersServiceImpl" class="headerlink" title="OrdersServiceImpl"></a>OrdersServiceImpl</h5><pre><code>package xyz.ljcn.service.Impl;import java.util.ArrayList;import java.util.Date;import java.util.List;import xyz.ljcn.constants.Constants;import xyz.ljcn.dao.CartDAO;import xyz.ljcn.dao.GoodsDAO;import xyz.ljcn.dao.OrdersDAO;import xyz.ljcn.entity.Cart;import xyz.ljcn.entity.Goods;import xyz.ljcn.entity.Orders;import xyz.ljcn.entity.OrdersItem;import xyz.ljcn.service.OrdersService;import xyz.ljcn.utils.BeanFactory;import xyz.ljcn.utils.UUIDUtils;public class OrdersServiceImpl implements OrdersService {    OrdersDAO dao = BeanFactory.getBean(OrdersDAO.class);    CartDAO cartDAO = BeanFactory.getBean(CartDAO.class);    GoodsDAO goodsDAO = BeanFactory.getBean(GoodsDAO.class);    public void addOrders(Integer uid, String address) {        // 根据已有信息，构造出订单对象        Orders orders = new Orders();        orders.setUid(uid);        orders.setAddress(address);        // 生成随机32位订单编号        String id = UUIDUtils.getUUID();        orders.setId(id);        // 计算总金额        // 查询购物车信息，包含商品信息        Cart cart = new Cart();        cart.setUid(uid);        List&lt;Cart&gt; cList = cartDAO.queryWithGoods(cart);        // 计算总金额，并构建订单明细数据        double price = 0; // 总金额        // 订单明细        List&lt;OrdersItem&gt; items = new ArrayList&lt;&gt;();        for (Cart c : cList) {            price += c.getGoods().getEstoreprice() * c.getBuynum();            OrdersItem item = new OrdersItem(id, c.getGid(), c.getBuynum());            items.add(item);        }        orders.setTotalprice(price);        // 订单状态：1待付款  2已付款 3已过期   4已取消        orders.setStatus(Constants.STATUS_ORDER.UNPAY);        orders.setCreatetime(new Date());        // 添加订单数据        dao.addOrders(orders);        // 添加订单明细        dao.addOrdersItem(items);        // 清空购物车        cartDAO.clear(uid);    }    @Override    public List&lt;Orders&gt; query(Integer id) {        return dao.query(id);    }    @Override    public void cancel(String oid, Integer uid) {        dao.cancel(oid, uid);    }    public Orders get(String oid, Integer uid) {        // 查询订单        Orders orders = dao.get(oid, uid);        // 查询订单明细List        List&lt;OrdersItem&gt; list = dao.getItems(oid);        orders.setList(list);        // 遍历List,查询商品信息        Goods goods = new Goods();        for (OrdersItem item : list) {            goods.setId(item.getGid());            Goods goods2 = goodsDAO.query(goods).get(0);            item.setGoods(goods2);        }        return orders;    }    public void changeStatus(String oid, Integer uid, int status) {        dao.changeStatus(oid, uid, status);    }}</code></pre><h5 id="OrdersServiceProxy"><a href="#OrdersServiceProxy" class="headerlink" title="OrdersServiceProxy"></a>OrdersServiceProxy</h5><pre><code>package xyz.ljcn.service.Impl;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.lang.reflect.Proxy;import java.sql.Connection;import java.sql.SQLException;import xyz.ljcn.service.OrdersService;import xyz.ljcn.utils.BeanFactory;import xyz.ljcn.utils.JDBCUtils;public class OrdersServiceProxy {    private static OrdersService service = BeanFactory.getBean(OrdersService.class);    public static OrdersService createOrdersServiceProxy() {        return (OrdersService)Proxy.newProxyInstance(                service.getClass().getClassLoader(),                 service.getClass().getInterfaces(),                 new InvocationHandler() {                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {                        String methodName = method.getName();                        Object returnValue = null;                        if ( methodName.startsWith(&quot;select&quot;)                                || methodName.startsWith(&quot;query&quot;)                                || methodName.startsWith(&quot;find&quot;)                                || methodName.startsWith(&quot;get&quot;)) {                            // 性能统计相关的业务                            returnValue = method.invoke(service, args);                        }                        // 进行统一的事务管理                        else {                            /*                             * 事务处理的细节：                             * 1、手动开启事务                             * 2、必须使用同一个连接对象来完成，因为提交及回滚事务都是通过连接对象来完成                             * 3、在catch中回滚事务，并且尽可能保证catch顶级异常Exception                             * 4、在finally中提交事务                             */                            Connection conn = null;                            try {                                conn = JDBCUtils.getConnection();                                System.out.println(conn);                                conn.setAutoCommit(false);                                // 核心业务调用                                returnValue = method.invoke(service, args);                            } catch (Exception e) {                                e.printStackTrace();                                try {                                    conn.rollback();                                } catch (SQLException e1) {                                    e1.printStackTrace();                                }                            } finally {                                try {                                    conn.commit();                                } catch (SQLException e) {                                    e.printStackTrace();                                }                                /*try {                                    // 关闭连接：实际上连接并没有真正关闭，而是还回连接池中。                                    conn.close();                                } catch (SQLException e) {                                    e.printStackTrace();                                }*/                            }                        }                        return returnValue;                    }                });    }}</code></pre><h3 id="dao"><a href="#dao" class="headerlink" title="dao"></a>dao</h3><h5 id="OrdersDAO"><a href="#OrdersDAO" class="headerlink" title="OrdersDAO"></a>OrdersDAO</h5><pre><code>package xyz.ljcn.dao;import java.util.List;import xyz.ljcn.entity.Orders;import xyz.ljcn.entity.OrdersItem;public interface OrdersDAO {    void addOrders(Orders orders);    void addOrdersItem(List&lt;OrdersItem&gt; items);    List&lt;Orders&gt; query(Integer id);    void cancel(String oid, Integer uid);    Orders get(String oid, Integer uid);    List&lt;OrdersItem&gt; getItems(String oid);    void changeStatus(String oid, Integer uid, int status);}</code></pre><h5 id="OrdersDAOImpl"><a href="#OrdersDAOImpl" class="headerlink" title="OrdersDAOImpl"></a>OrdersDAOImpl</h5><pre><code>package xyz.ljcn.dao.Impl;import java.util.List;import org.apache.commons.dbutils.QueryRunner;import org.apache.commons.dbutils.handlers.BeanHandler;import org.apache.commons.dbutils.handlers.BeanListHandler;import xyz.ljcn.constants.Constants;import xyz.ljcn.dao.OrdersDAO;import xyz.ljcn.entity.Orders;import xyz.ljcn.entity.OrdersItem;import xyz.ljcn.utils.JDBCUtils;public class OrdersDAOImpl implements OrdersDAO {    public void addOrders(Orders orders) {        try {            //QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());            // 后期开发中，所有的非查询操作，都不可以指定数据源，因为每个更新操作，都可能是事务的一部分            QueryRunner qr = new QueryRunner();            String sql = &quot;insert into orders values(?,?,?,?,?,?)&quot;;            //qr.update(sql);            qr.update(JDBCUtils.getConnection(), sql, orders.getId(), orders.getUid(), orders.getTotalprice(),                    orders.getAddress(), orders.getStatus(), orders.getCreatetime());        } catch (Exception e) {            e.printStackTrace();            throw new RuntimeException(&quot;...&quot;);        }    }    public void addOrdersItem(List&lt;OrdersItem&gt; items) {        try {            QueryRunner qr = new QueryRunner();            String sql = &quot;insert into ordersitem values(?,?,?)&quot;;            /*for (OrdersItem item : items) {                qr.update(conn, sql, item.getOid(), item.getGid(), item.getBuynum());            }*/            /*             * 批量操作，需要接收一个二维数组，其中：             *     高维(1维)：操作次数，一般是集合的size             *     低维(2维)：参数个数，即?的个数             *              */            Object[][] params = new Object[items.size()][3];            // 初始化二维数组数据            for (int i = 0; i &lt; params.length; i++) {                params[i][0] = items.get(i).getOid();                params[i][1] = items.get(i).getGid();                params[i][2] = items.get(i).getBuynum();            }            qr.batch(JDBCUtils.getConnection(), sql, params);        } catch (Exception e) {            e.printStackTrace();            throw new RuntimeException(&quot;...&quot;);        }    }    @Override    public List&lt;Orders&gt; query(Integer id) {        try {            QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());            String sql = &quot;select * from orders where uid=? order by createtime desc&quot;;            return qr.query(sql, new BeanListHandler&lt;Orders&gt;(Orders.class), id);        } catch (Exception e) {            e.printStackTrace();            throw new RuntimeException(&quot;...&quot;);        }    }    public void cancel(String oid, Integer uid) {        try {            QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());            String sql = &quot;update orders set status=? where id=? and uid=?&quot;;            qr.update(sql, Constants.STATUS_ORDER.CANCEL, oid, uid);        } catch (Exception e) {            e.printStackTrace();            throw new RuntimeException(&quot;...&quot;);        }    }    @Override    public Orders get(String oid, Integer uid) {        try {            QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());            String sql = &quot;select * from orders where id=? and uid=?&quot;;            return qr.query(sql, new BeanHandler&lt;Orders&gt;(Orders.class), oid, uid);        } catch (Exception e) {            e.printStackTrace();            throw new RuntimeException(&quot;...&quot;);        }    }    @Override    public List&lt;OrdersItem&gt; getItems(String oid) {        try {            QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());            String sql = &quot;select * from ordersitem where oid=?&quot;;            return qr.query(sql, new BeanListHandler&lt;OrdersItem&gt;(OrdersItem.class), oid);        } catch (Exception e) {            e.printStackTrace();            throw new RuntimeException(&quot;...&quot;);        }    }    public void changeStatus(String oid, Integer uid, int status) {        try {            QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());            String sql = &quot;update orders set status=? where id=? and uid=?&quot;;            qr.update(sql, status, oid, uid);        } catch (Exception e) {            e.printStackTrace();            throw new RuntimeException(&quot;...&quot;);        }    }}</code></pre><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前台页面&quot;&gt;&lt;a href=&quot;#前台页面&quot; class=&quot;headerlink&quot; title=&quot;前台页面&quot;&gt;&lt;/a&gt;前台页面&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;/estore/WebRoot/orders_detail.jsp&lt;/li&gt;
&lt;li&gt;/estore/WebRoot/orders.jsp&lt;/li&gt;
&lt;li&gt;/estore/WebRoot/orders_submit.jsp&lt;/li&gt;
&lt;li&gt;/estore/WebRoot/pay_success.jsp&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="java电商项目" scheme="http://yoursite.com/tags/java%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>centos7.x网络服务无法开启</title>
    <link href="http://yoursite.com/2019/06/19/centos7-network-service-failed/"/>
    <id>http://yoursite.com/2019/06/19/centos7-network-service-failed/</id>
    <published>2019-06-18T16:00:00.000Z</published>
    <updated>2019-06-30T03:20:40.843Z</updated>
    
    <content type="html"><![CDATA[<h3 id="错误信息"><a href="#错误信息" class="headerlink" title="错误信息"></a>错误信息</h3><pre><code>[root@localhost /]# systemctl restart network、</code></pre><blockquote><p>Job for network.service failed because the control process exited with error code. See “systemctl status network.service” and “journalctl -xe” for details.<br><a id="more"></a><br>    [root@localhost /]# systemctl status network.service</p></blockquote><blockquote><p>network.service - LSB: Bring up/down networking<br>   Loaded: loaded (/etc/rc.d/init.d/network; bad; vendor preset: disabled)<br>   Active: failed (Result: exit-code) since 三 2019-06-19 22: 54 :05 CST; 3min 47s ago<br>     Docs: man:systemd-sysv-generator(8)<br>  Process: 9300 ExecStart=/etc/rc.d/init.d/network start (code=exited, status=1/FAILURE)</p><p>6月 19 22 :54 :05 localhost.localdomain network[9300]: RTNETLINK answers: File exists<br>6月 19 22 :54 :05 localhost.localdomain network[9300]: RTNETLINK answers: File exists<br>6月 19 22 :54 :05 localhost.localdomain network[9300]: RTNETLINK answers: File exists<br>6月 19 22: 54 :05 localhost.localdomain network[9300]: RTNETLINK answers: File exists<br>6月 19 22: 54 :05 localhost.localdomain network[9300]: RTNETLINK answers: File exists<br>6月 19 22 :54 :05 localhost.localdomain network[9300]: RTNETLINK answers: File exists<br>6月 19 22 :54 :05 localhost.localdomain systemd[1]: network.service: control process…1<br>6月 19 22 :54 :05 localhost.localdomain systemd[1]: Failed to start LSB: Bring up/do….<br>6月 19 22 :54 :05 localhost.localdomain systemd[1]: Unit network.service entered fai….<br>6月 19 22 :54 :05 localhost.localdomain systemd[1]: network.service failed.<br>Hint: Some lines were ellipsized, use -l to show in full.</p></blockquote><h3 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h3><pre><code>[root@localhost /]# ip a</code></pre><p>或者</p><pre><code>[root@localhost /]# ip addr</code></pre><p>查看mac地址</p><blockquote><p>1: lo: &lt;LOOPBACK,UP,LOWER_UPmtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000<br>    link/loopback 00 : 00: 00 :00 :00 :   00 brd 00 :00 :00 :00 :00 :00<br>    inet 127.0.0.1/8 scope host lo<br>       valid_lft forever preferred_lft forever<br>    inet6 ::1/128 scope host<br>       valid_lft forever preferred_lft forever<br>2: ens33: &lt;BROADCAST,MULTICASTmtu 1500 qdisc noop state DOWN group default qlen 1000<br>    link/ether <strong>00: 0c :29 : e2 :42 : 80</strong> brd ff :ff : ff : ff : ff : ff<br>3: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UPmtu 1500 qdisc noqueue state DOWN group default qlen 1000<br>    link/ether 52 :54 :00 :27 :7f :88 brd ff :ff :ff :ff :ff :ff<br>    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0<br>       valid_lft forever preferred_lft forever<br>4: virbr0-nic: &lt;BROADCAST,MULTICASTmtu 1500 qdisc pfifo_fast master virbr0 state DOWN group default qlen 1000<br>    link/ether 52 :54 :00 :27 :7f :88 brd ff :ff :ff :ff :ff :ff</p></blockquote><p>注：粗体部分即为mac地址 </p><h5 id="查看及修改文件"><a href="#查看及修改文件" class="headerlink" title="查看及修改文件"></a>查看及修改文件</h5><pre><code>[root@localhost /]# cd /etc/sysconfig/network-scripts/</code></pre><p>具体的文件名ifcfg-XXX，例：</p><pre><code>[ljc@localhost network-scripts]$ vi ifcfg-ens33</code></pre><p>修改HWADDR，若没有就添加</p><pre><code>HWADDR=mac地址</code></pre><p>保存，退出</p><h5 id="重启网络服务"><a href="#重启网络服务" class="headerlink" title="重启网络服务"></a>重启网络服务</h5><pre><code>[ljc@localhost network-scripts]$ service network restart</code></pre><p>结果：</p><blockquote><p>Restarting network (via systemctl):                        [  确定  ]</p></blockquote><pre><code>[root@localhost network-scripts]# ping www.baidu.com</code></pre><blockquote><p>PING <a href="http://www.a.shifen.com" target="_blank" rel="noopener">www.a.shifen.com</a> (183.232.231.172) 56(84) bytes of data.<br>64 bytes from 183.232.231.172 (183.232.231.172): icmp_seq=1 ttl=54 time=62.5 ms<br>64 bytes from 183.232.231.172 (183.232.231.172): icmp_seq=2 ttl=54 time=150 ms<br>64 bytes from 183.232.231.172 (183.232.231.172): icmp_seq=3 ttl=54 time=86.3 ms<br>64 bytes from 183.232.231.172 (183.232.231.172): icmp_seq=4 ttl=54 time=156 ms<br>64 bytes from 183.232.231.172 (183.232.231.172): icmp_seq=5 ttl=54 time=86.0 ms</p></blockquote><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;错误信息&quot;&gt;&lt;a href=&quot;#错误信息&quot; class=&quot;headerlink&quot; title=&quot;错误信息&quot;&gt;&lt;/a&gt;错误信息&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;[root@localhost /]# systemctl restart network、
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;Job for network.service failed because the control process exited with error code. See “systemctl status network.service” and “journalctl -xe” for details.&lt;br&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="CentOS 7.x" scheme="http://yoursite.com/tags/CentOS-7-x/"/>
    
  </entry>
  
  <entry>
    <title>java商城项目（五）——商品查询显示和购物车实现</title>
    <link href="http://yoursite.com/2019/06/18/estorefive/"/>
    <id>http://yoursite.com/2019/06/18/estorefive/</id>
    <published>2019-06-17T16:00:00.000Z</published>
    <updated>2019-06-30T02:54:44.228Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前台页面"><a href="#前台页面" class="headerlink" title="前台页面"></a>前台页面</h3><ul><li>goods.jsp</li><li>goods_detail.jsp</li><li>cart.jsp</li><li>buyorcart.jsp</li></ul><a id="more"></a><h3 id="后台代码实现"><a href="#后台代码实现" class="headerlink" title="后台代码实现"></a>后台代码实现</h3><h4 id="entity"><a href="#entity" class="headerlink" title="entity"></a>entity</h4><h5 id="Goods-java"><a href="#Goods-java" class="headerlink" title="Goods.java"></a>Goods.java</h5><pre><code>package xyz.ljcn.entity;import java.util.Date;public class Goods {private Integer id;private Integer cid;private String name;private Double marketprice;private Double estoreprice;private Integer num;private String imgurl;private Integer ishot;private Integer status;private Date createtime;private String description;public Integer getId() {    return id;}public void setId(Integer id) {    this.id = id;}public Integer getCid() {    return cid;}public void setCid(Integer cid) {    this.cid = cid;}public String getName() {    return name;}public void setName(String name) {    this.name = name;}public Double getMarketprice() {    return marketprice;}public void setMarketprice(Double marketprice) {    this.marketprice = marketprice;}public Double getEstoreprice() {    return estoreprice;}public void setEstoreprice(Double estoreprice) {    this.estoreprice = estoreprice;}public Integer getNum() {    return num;}public void setNum(Integer num) {    this.num = num;}public String getImgurl() {    return imgurl;}public void setImgurl(String imgurl) {    this.imgurl = imgurl;}public Integer getIshot() {    return ishot;}public void setIshot(Integer ishot) {    this.ishot = ishot;}public Integer getStatus() {    return status;}public void setStatus(Integer status) {    this.status = status;}public Date getCreatetime() {    return createtime;}public void setCreatetime(Date createtime) {    this.createtime = createtime;}public String getDescription() {    return description;}public void setDescription(String description) {    this.description = description;}@Overridepublic String toString() {    return &quot;Goods [id=&quot; + id + &quot;, cid=&quot; + cid + &quot;, name=&quot; + name            + &quot;, marketprice=&quot; + marketprice + &quot;, estoreprice=&quot;            + estoreprice + &quot;, num=&quot; + num + &quot;, imgurl=&quot; + imgurl            + &quot;, ishot=&quot; + ishot + &quot;, status=&quot; + status + &quot;, createtime=&quot;            + createtime + &quot;, description=&quot; + description + &quot;]&quot;;}public Goods() {    super();}public Goods(Integer id, Integer cid, String name, Double marketprice,        Double estoreprice, Integer num, String imgurl, Integer ishot,        Integer status, Date createtime, String description) {    super();    this.id = id;    this.cid = cid;    this.name = name;    this.marketprice = marketprice;    this.estoreprice = estoreprice;    this.num = num;    this.imgurl = imgurl;    this.ishot = ishot;    this.status = status;    this.createtime = createtime;    this.description = description; }}</code></pre><h5 id="Cart-java"><a href="#Cart-java" class="headerlink" title="Cart.java"></a>Cart.java</h5><pre><code>package xyz.ljcn.entity;public class Cart {private Integer uid;private Integer gid;private Integer buynum;/* * 购物项和商品的关系？ * 购物项 ===&gt; 商品      1:1 * 商品 ====&gt; 购物项  1:n * 当前是购物项对象，因此可以在该对象中添加商品对象的引用 */private Goods goods;public Goods getGoods() {    return goods;}public void setGoods(Goods goods) {    this.goods = goods;}public Integer getUid() {    return uid;}public void setUid(Integer uid) {    this.uid = uid;}public Integer getGid() {    return gid;}public void setGid(Integer gid) {    this.gid = gid;}public Integer getBuynum() {    return buynum;}public void setBuynum(Integer buynum) {    this.buynum = buynum;}@Overridepublic String toString() {    return &quot;Cart [uid=&quot; + uid + &quot;, gid=&quot; + gid + &quot;, buynum=&quot; + buynum            + &quot;, goods=&quot; + goods + &quot;]&quot;; }}</code></pre><h4 id="servlet"><a href="#servlet" class="headerlink" title="servlet"></a>servlet</h4><h5 id="GoodsServlet-java"><a href="#GoodsServlet-java" class="headerlink" title="GoodsServlet.java"></a>GoodsServlet.java</h5><pre><code>package xyz.ljcn.servlet;import java.io.IOException;import java.lang.reflect.InvocationTargetException;import java.util.List;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.apache.commons.beanutils.BeanUtils;import org.apache.commons.lang3.StringUtils;import xyz.ljcn.entity.Goods;import xyz.ljcn.service.GoodsService;import xyz.ljcn.utils.BeanFactory;@SuppressWarnings(&quot;all&quot;)@WebServlet(&quot;/goods&quot;)public class GoodsServlet extends BaseServlet {GoodsService service = BeanFactory.getBean(GoodsService.class);public void query(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {    Goods goods = new Goods();    try {        BeanUtils.populate(goods, req.getParameterMap());    } catch (Exception e) {        e.printStackTrace();    }    List&lt;Goods&gt; gList = service.query(goods);    req.setAttribute(&quot;gList&quot;, gList);    if ( StringUtils.equals(req.getParameter(&quot;target&quot;), &quot;detail&quot;) ) {        req.getRequestDispatcher(&quot;/goods_detail.jsp&quot;).forward(req, resp);    } else {        req.getRequestDispatcher(&quot;/goods.jsp&quot;).forward(req, resp);    } }}</code></pre><h5 id="CartServlet-java"><a href="#CartServlet-java" class="headerlink" title="CartServlet.java"></a>CartServlet.java</h5><pre><code>package xyz.ljcn.servlet;import java.io.IOException;import java.net.URLEncoder;import java.util.HashMap;import java.util.List;import java.util.Map;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import xyz.ljcn.entity.Cart;import xyz.ljcn.entity.User;import xyz.ljcn.service.CartService;import xyz.ljcn.utils.BeanFactory;@SuppressWarnings(&quot;all&quot;)@WebServlet(&quot;/cart&quot;)public class CartServlet extends BaseServlet {CartService service = BeanFactory.getBean(CartService.class);public void del(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {    User user = isLogin(req, resp);    if ( user != null ) {        int gid = Integer.parseInt(req.getParameter(&quot;gid&quot;));        Integer uid = user.getId();        service.del(uid, gid);        //resp.sendRedirect(req.getContextPath() + &quot;/cart?method=query&quot;);    } else {        resp.getWriter().write(&quot;nologin&quot;);    }}public void changeNum(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {    User user = isLogin(req, resp);    if ( user != null ) {        int buynum = Integer.parseInt(req.getParameter(&quot;buynum&quot;));        int gid = Integer.parseInt(req.getParameter(&quot;gid&quot;));        Integer uid = user.getId();        Cart cart = new Cart();        cart.setUid(uid);        cart.setGid(gid);        cart.setBuynum(buynum);        service.changeNum(cart);        //resp.sendRedirect(req.getContextPath() + &quot;/cart?method=query&quot;);    } else {        resp.getWriter().write(&quot;nologin&quot;);    }}public void goodsNum(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {    int goodsNum = service.goodsNum(req.getParameter(&quot;uid&quot;));    resp.getWriter().write(goodsNum+&quot;&quot;);}public void query(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {    // 1、判断是否登录    User user = (User)req.getSession().getAttribute(&quot;loginUser&quot;);    if ( user == null ) {        // 登录成功之后，跳转到之前所在的页面        // 从哪个页面跳转过来的        String referer = req.getHeader(&quot;Referer&quot;);        if ( referer != null ) {            referer = URLEncoder.encode(referer, &quot;UTF-8&quot;);            resp.sendRedirect(req.getContextPath() + &quot;/login.jsp?redirect=&quot; + referer);        } else {            resp.sendRedirect(req.getContextPath() + &quot;/login.jsp&quot;);        }        return ;    }    Cart cart = new Cart();    cart.setUid(user.getId());    List&lt;Cart&gt; cList = service.queryWithGoods(cart);    req.setAttribute(&quot;cList&quot;, cList);    req.getRequestDispatcher(&quot;/cart.jsp&quot;).forward(req, resp);}public void add(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {    // 1、判断是否登录    User user = (User)req.getSession().getAttribute(&quot;loginUser&quot;);    if ( user == null ) {        // 从哪个页面跳转过来的        String referer = req.getHeader(&quot;Referer&quot;);        System.out.println(referer);        referer = URLEncoder.encode(referer, &quot;UTF-8&quot;);        resp.sendRedirect(req.getContextPath() + &quot;/login.jsp?redirect=&quot; + referer);        return ;    }    // 2、获取商品id和购买数量    String gid = req.getParameter(&quot;gid&quot;);    String buynum = req.getParameter(&quot;buynum&quot;);    Integer uid = user.getId();    Cart cart = new Cart();    cart.setGid(Integer.parseInt(gid));    cart.setUid(uid);    cart.setBuynum(Integer.parseInt(buynum));    // 3、调用业务层    service.add(cart);    // 4、跳转到中间页    resp.sendRedirect(req.getContextPath() + &quot;/buyorcart.jsp&quot;); }}</code></pre><h4 id="service"><a href="#service" class="headerlink" title="service"></a>service</h4><h5 id="GoodsService-java"><a href="#GoodsService-java" class="headerlink" title="GoodsService.java"></a>GoodsService.java</h5><pre><code>package xyz.ljcn.service;import java.util.List;import xyz.ljcn.entity.Goods;public interface GoodsService {List&lt;Goods&gt; query(Goods goods); }</code></pre><h5 id="CartService-java"><a href="#CartService-java" class="headerlink" title="CartService.java"></a>CartService.java</h5><pre><code>package xyz.ljcn.service;import java.util.List;import xyz.ljcn.entity.Cart;public interface CartService {List&lt;Cart&gt; query(Cart cart);void add(Cart cart);List&lt;Cart&gt; queryWithGoods(Cart cart);int goodsNum(String uid);void changeNum(Cart cart);void del(Integer uid, int gid);}</code></pre><h4 id="serviceImpl"><a href="#serviceImpl" class="headerlink" title="serviceImpl"></a>serviceImpl</h4><h5 id="GoodsServiceImpl-java"><a href="#GoodsServiceImpl-java" class="headerlink" title="GoodsServiceImpl.java"></a>GoodsServiceImpl.java</h5><pre><code>package xyz.ljcn.service.Impl;import java.util.List;import xyz.ljcn.dao.GoodsDAO;import xyz.ljcn.entity.Goods;import xyz.ljcn.service.GoodsService;import xyz.ljcn.utils.BeanFactory;public class GoodsServiceImpl implements GoodsService {GoodsDAO dao = BeanFactory.getBean(GoodsDAO.class);public List&lt;Goods&gt; query(Goods goods) {    return dao.query(goods);   } }</code></pre><h5 id="CartServiceImpl-java"><a href="#CartServiceImpl-java" class="headerlink" title="CartServiceImpl.java"></a>CartServiceImpl.java</h5><pre><code>package xyz.ljcn.service.Impl;import java.util.List;import xyz.ljcn.dao.CartDAO;import xyz.ljcn.dao.GoodsDAO;import xyz.ljcn.entity.Cart;import xyz.ljcn.service.CartService;import xyz.ljcn.utils.BeanFactory;public class CartServiceImpl implements CartService {CartDAO dao = BeanFactory.getBean(CartDAO.class);GoodsDAO goodsDao = BeanFactory.getBean(GoodsDAO.class);public List&lt;Cart&gt; query(Cart cart) {    return dao.query(cart);}public void add(Cart cart) {    // 1、查询购买记录    List&lt;Cart&gt; cList = dao.query(cart);    // 没有购买记录，新增    if ( cList == null || cList.size() == 0 ) {        dao.add(cart);    }    // 有购买记录，修改购买数量    else {        int oldNum = cList.get(0).getBuynum();        int newNum = oldNum + cart.getBuynum();        cart.setBuynum(newNum);        dao.update(cart);    }}@Overridepublic List&lt;Cart&gt; queryWithGoods(Cart cart) {    return dao.queryWithGoods(cart);}@Overridepublic int goodsNum(String uid) {    return dao.goodsNum(uid);}@Overridepublic void changeNum(Cart cart) {    dao.changeNum(cart);}@Overridepublic void del(Integer uid, int gid) {    dao.del(uid, gid);}}</code></pre><h4 id="dao"><a href="#dao" class="headerlink" title="dao"></a>dao</h4><h5 id="CategoryDAO"><a href="#CategoryDAO" class="headerlink" title="CategoryDAO"></a>CategoryDAO</h5><pre><code>package xyz.ljcn.dao;import java.util.List;import xyz.ljcn.entity.Category;public interface CategoryDAO {    List&lt;Category&gt; query();}</code></pre><h5 id="GoodsDAO"><a href="#GoodsDAO" class="headerlink" title="GoodsDAO"></a>GoodsDAO</h5><pre><code>package xyz.ljcn.dao;import java.util.List;import xyz.ljcn.entity.Goods;public interface GoodsDAO {    List&lt;Goods&gt; query(Goods goods);}</code></pre><h4 id="daoImpl"><a href="#daoImpl" class="headerlink" title="daoImpl"></a>daoImpl</h4><h5 id="CategoryDAOImpl"><a href="#CategoryDAOImpl" class="headerlink" title="CategoryDAOImpl"></a>CategoryDAOImpl</h5><pre><code>package xyz.ljcn.dao.Impl;import java.util.List;import org.apache.commons.dbutils.QueryRunner;import org.apache.commons.dbutils.handlers.BeanListHandler;import xyz.ljcn.dao.CategoryDAO;import xyz.ljcn.entity.Category;import xyz.ljcn.utils.JDBCUtils;public class CategoryDAOImpl implements CategoryDAO {    public List&lt;Category&gt; query() {        try {            QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());            String sql = &quot;select * from category &quot;;            return qr.query(sql, new BeanListHandler&lt;Category&gt;(Category.class));        } catch (Exception e) {            e.printStackTrace();            throw new RuntimeException(&quot;...&quot;);        }    }}</code></pre><h5 id="GoodsDAOImpl"><a href="#GoodsDAOImpl" class="headerlink" title="GoodsDAOImpl"></a>GoodsDAOImpl</h5><pre><code>package xyz.ljcn.dao.Impl;import java.util.ArrayList;import java.util.List;import org.apache.commons.dbutils.QueryRunner;import org.apache.commons.dbutils.handlers.BeanListHandler;import org.apache.commons.lang3.StringUtils;import xyz.ljcn.dao.GoodsDAO;import xyz.ljcn.entity.Goods;import xyz.ljcn.utils.JDBCUtils;public class GoodsDAOImpl implements GoodsDAO {    public List&lt;Goods&gt; query(Goods goods) {        try {            QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());            String sql = &quot;select * from goods where 1=1&quot;;            List&lt;Object&gt; list = new ArrayList&lt;&gt;();            if ( goods.getId() != null ) {                sql += &quot; and id=? &quot;;                list.add(goods.getId());            }            if ( goods.getCid() != null ) {                sql += &quot; and cid=? &quot;;                list.add(goods.getCid());            }            //if ( goods.getName() != null &amp;&amp; !&quot;&quot;.equals(goods.getName()) )            if ( StringUtils.isNotBlank(goods.getName()) ) {                sql += &quot; and name like ? &quot;;                list.add(&quot;%&quot; + goods.getName() + &quot;%&quot;);            }            //...            Object[] params = list.toArray();            return qr.query(sql, new BeanListHandler&lt;Goods&gt;(Goods.class), params);        } catch (Exception e) {            e.printStackTrace();            throw new RuntimeException(&quot;...&quot;);        }    }}</code></pre><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前台页面&quot;&gt;&lt;a href=&quot;#前台页面&quot; class=&quot;headerlink&quot; title=&quot;前台页面&quot;&gt;&lt;/a&gt;前台页面&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;goods.jsp&lt;/li&gt;
&lt;li&gt;goods_detail.jsp&lt;/li&gt;
&lt;li&gt;cart.jsp&lt;/li&gt;
&lt;li&gt;buyorcart.jsp&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="java电商项目" scheme="http://yoursite.com/tags/java%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>java商城项目（四）——登录实现</title>
    <link href="http://yoursite.com/2019/06/17/estorefour/"/>
    <id>http://yoursite.com/2019/06/17/estorefour/</id>
    <published>2019-06-16T16:00:00.000Z</published>
    <updated>2019-06-18T09:24:31.706Z</updated>
    
    <content type="html"><![CDATA[<h3 id="index-jsp"><a href="#index-jsp" class="headerlink" title="index.jsp"></a>index.jsp</h3><a id="more"></a><pre><code>&lt;%@ page contentType=&quot;text/html; charset=UTF-8&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;title&gt;登录&lt;/title&gt;&lt;%@include file=&quot;inc/common_head.jsp&quot;%&gt;&lt;script type=&quot;text/javascript&quot;&gt;    jQuery(function($) {        $(&quot;#regBtn&quot;).click(function() {            var ok = userLogin();            if ( ok ) {                // 发送到后台的数据                var data = {                    method: &quot;login&quot;,                    telephone: $(&quot;#telephone&quot;).val(),                    password: $(&quot;#password&quot;).val()                }                // 是否发送记住用户名的标识                if ( $(&quot;#remember&quot;).is(&quot;:checked&quot;) ) {                    data.remember = 1;                }                $.ajax({                    url: &quot;user&quot;,                    type: &quot;post&quot;,                    data: data,                    success: function(code) {                        if ( code == &quot;ok&quot; ) {                            if ( &quot;${param.redirect}&quot; ) {                                //alert(&quot;${param.redirect}&quot;)                                // URL在java中已经进行了编码，因此需要对URL进行解码                                location = decodeURIComponent(&quot;${param.redirect}&quot;);                            } else {                                location = &quot;index.jsp&quot;;                            }                        } else {                            alert(&quot;用户名或密码错误！&quot;);                        }                    }                });            }        })//.click();    });&lt;/script&gt;&lt;/head&gt;&lt;body&gt;    &lt;%@include file=&quot;inc/header.jsp&quot;%&gt;    &lt;div class=&quot;block block1&quot;&gt;        &lt;div class=&quot;blank&quot;&gt;&lt;/div&gt;        &lt;div class=&quot;usBox clearfix&quot;&gt;            &lt;div class=&quot;usBox_1&quot;&gt;                &lt;div class=&quot;login_tab&quot;&gt;                    &lt;ul&gt;                        &lt;li class=&quot;active&quot;&gt;用户登录&lt;/li&gt;                        &lt;li onclick=&quot;location.href=&apos;register.jsp&apos;;&quot;&gt;                            &lt;a href=&quot;javascript:;&quot;&gt;用户注册&lt;/a&gt;                        &lt;/li&gt;                    &lt;/ul&gt;                &lt;/div&gt;                &lt;form name=&quot;formLogin&quot; id=&quot;loginForm&quot; action=&quot;javascript:alert(1);&quot; method=&quot;post&quot;&gt;                    &lt;table width=&quot;100%&quot; border=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;3&quot;                        cellspacing=&quot;5&quot;&gt;                        &lt;tr&gt;                            &lt;td width=&quot;70px&quot; class=&quot;justify&quot;&gt;用户名&lt;/td&gt;                            &lt;td&gt;                                &lt;input placeholder=&quot;请输入手机号&quot; value=&quot;${cookie.telephone.value }&quot; name=&quot;telephone&quot; id=&quot;telephone&quot;                                     class=&quot;inputBg&quot; onkeyup=&quot;is_registered(this.value, true);&quot;  /&gt;                                &lt;span style=&quot;color:#FF0000&quot; id=&quot;username_notice&quot;&gt;&lt;/span&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                        &lt;tr&gt;                            &lt;td class=&quot;justify&quot;&gt;密码&lt;/td&gt;                            &lt;td&gt;                                &lt;input name=&quot;password&quot; id=&quot;password&quot; value=&quot;123123&quot; placeholder=&quot;请输入密码&quot; type=&quot;password&quot;                                     class=&quot;inputBg&quot; onkeyup=&quot;check_password(this.value, true);&quot; /&gt;                                &lt;span style=&quot;color:#FF0000&quot; id=&quot;password_notice&quot;&gt;&lt;/span&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                        &lt;tr&gt;                            &lt;td&gt;&lt;/td&gt;                            &lt;td&gt;                                &lt;input type=&quot;checkbox&quot; value=&quot;1&quot;                                 ${empty cookie.telephone.value ? &quot;&quot; : &quot;checked&quot; } name=&quot;remember&quot; id=&quot;remember&quot; /&gt;                                &lt;label for=&quot;remember&quot;&gt;记住用户名&lt;/label&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                        &lt;tr&gt;                            &lt;td&gt;&amp;nbsp;&lt;/td&gt;                            &lt;td&gt;                                &lt;a href=&quot;javascript:;&quot;&gt;                                    &lt;input id=&quot;regBtn&quot; value=&quot;立  即  登  录&quot;                                         type=&quot;button&quot; class=&quot;us_Submit_reg&quot;/&gt;                                &lt;/a&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                        &lt;tr&gt;                            &lt;td&gt;&amp;nbsp;&lt;/td&gt;                            &lt;td&gt;                                &lt;a href=&quot;javascript:;&quot; onclick=&quot;location=&apos;register.jsp&apos;&quot;&gt;                                    &lt;input id=&quot;loginBtn&quot; value=&quot;没有账号？立即注册&quot;                                         type=&quot;button&quot; class=&quot;us_Submit_log&quot; /&gt;                                &lt;/a&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                    &lt;/table&gt;                &lt;/form&gt;                &lt;div class=&quot;blank&quot;&gt;&lt;/div&gt;            &lt;/div&gt;        &lt;/div&gt;        &lt;%@include file=&quot;inc/footer.jsp&quot;%&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="servlet"><a href="#servlet" class="headerlink" title="servlet"></a>servlet</h3><pre><code>public void login(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {`    String telephone = req.getParameter(&quot;telephone&quot;);    String password = req.getParameter(&quot;password&quot;);    User user = service.login(telephone, password);    if ( user == null ) {        resp.getWriter().write(&quot;err&quot;);    } else {        // 将用户对象保存到session中        req.getSession().setAttribute(Constants.USER.LOGINUSER, user);        // 记住用户名        String remember = req.getParameter(&quot;remember&quot;);        if ( remember != null ) {            Cookie c = new Cookie(&quot;telephone&quot;, telephone);            c.setMaxAge(9999999);            resp.addCookie(c);        } else {            Cookie c = new Cookie(&quot;telephone&quot;, null);            c.setMaxAge(0);            resp.addCookie(c);        }        resp.getWriter().write(&quot;ok&quot;);    }}</code></pre><h3 id="service"><a href="#service" class="headerlink" title="service"></a>service</h3><pre><code>User login(String telephone, String password);</code></pre><h3 id="serviceImpl"><a href="#serviceImpl" class="headerlink" title="serviceImpl"></a>serviceImpl</h3><pre><code>public User login(String telephone, String password) {    password = MD5Utils.str2MD5(password);    return dao.login(telephone, password);}</code></pre><h3 id="dao"><a href="#dao" class="headerlink" title="dao"></a>dao</h3><pre><code>User login(String telephone, String password);</code></pre><h3 id="daoImpl"><a href="#daoImpl" class="headerlink" title="daoImpl"></a>daoImpl</h3><pre><code>public User login(String telephone, String password) {    try {        QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());        String sql = &quot;select * from user where telephone=? and password=?&quot;;        return qr.query(sql, new BeanHandler&lt;User&gt;(User.class), telephone, password);    } catch (Exception e) {        e.printStackTrace();        throw new RuntimeException(&quot;...&quot;);   }}</code></pre><h3 id="index-jsp-1"><a href="#index-jsp-1" class="headerlink" title="index.jsp"></a>index.jsp</h3><pre><code>&lt;%@ page contentType=&quot;text/html; charset=UTF-8&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;title&gt;登录&lt;/title&gt;&lt;%@include file=&quot;inc/common_head.jsp&quot;%&gt;&lt;script type=&quot;text/javascript&quot;&gt;jQuery(function($) {    $(&quot;#regBtn&quot;).click(function() {        var ok = userLogin();        if ( ok ) {            // 发送到后台的数据            var data = {                method: &quot;login&quot;,                telephone: $(&quot;#telephone&quot;).val(),                password: $(&quot;#password&quot;).val()            }            // 是否发送记住用户名的标识            if ( $(&quot;#remember&quot;).is(&quot;:checked&quot;) ) {                data.remember = 1;            }            $.ajax({                url: &quot;user&quot;,                type: &quot;post&quot;,                data: data,                success: function(code) {                    if ( code == &quot;ok&quot; ) {                        if ( &quot;${param.redirect}&quot; ) {                            //alert(&quot;${param.redirect}&quot;)                            // URL在java中已经进行了编码，因此需要对URL进行解码                            location = decodeURIComponent(&quot;${param.redirect}&quot;);                        } else {                            location = &quot;index.jsp&quot;;                        }                    } else {                        alert(&quot;用户名或密码错误！&quot;);                    }                }            });        }    })//.click();});&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;%@include file=&quot;inc/header.jsp&quot;%&gt;&lt;div class=&quot;block block1&quot;&gt;    &lt;div class=&quot;blank&quot;&gt;&lt;/div&gt;    &lt;div class=&quot;usBox clearfix&quot;&gt;        &lt;div class=&quot;usBox_1&quot;&gt;            &lt;div class=&quot;login_tab&quot;&gt;                &lt;ul&gt;                    &lt;li class=&quot;active&quot;&gt;用户登录&lt;/li&gt;                    &lt;li onclick=&quot;location.href=&apos;register.jsp&apos;;&quot;&gt;                        &lt;a href=&quot;javascript:;&quot;&gt;用户注册&lt;/a&gt;                    &lt;/li&gt;                &lt;/ul&gt;            &lt;/div&gt;            &lt;form name=&quot;formLogin&quot; id=&quot;loginForm&quot; action=&quot;javascript:alert(1);&quot; method=&quot;post&quot;&gt;                &lt;table width=&quot;100%&quot; border=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;3&quot;                    cellspacing=&quot;5&quot;&gt;                    &lt;tr&gt;                        &lt;td width=&quot;70px&quot; class=&quot;justify&quot;&gt;用户名&lt;/td&gt;                        &lt;td&gt;                            &lt;input placeholder=&quot;请输入手机号&quot; value=&quot;${cookie.telephone.value }&quot; name=&quot;telephone&quot; id=&quot;telephone&quot;                                 class=&quot;inputBg&quot; onkeyup=&quot;is_registered(this.value, true);&quot;  /&gt;                            &lt;span style=&quot;color:#FF0000&quot; id=&quot;username_notice&quot;&gt;&lt;/span&gt;                        &lt;/td&gt;                    &lt;/tr&gt;                    &lt;tr&gt;                        &lt;td class=&quot;justify&quot;&gt;密码&lt;/td&gt;                        &lt;td&gt;                            &lt;input name=&quot;password&quot; id=&quot;password&quot; value=&quot;123123&quot; placeholder=&quot;请输入密码&quot; type=&quot;password&quot;                                 class=&quot;inputBg&quot; onkeyup=&quot;check_password(this.value, true);&quot; /&gt;                            &lt;span style=&quot;color:#FF0000&quot; id=&quot;password_notice&quot;&gt;&lt;/span&gt;                        &lt;/td&gt;                    &lt;/tr&gt;                    &lt;tr&gt;                        &lt;td&gt;&lt;/td&gt;                        &lt;td&gt;                            &lt;input type=&quot;checkbox&quot; value=&quot;1&quot;                             ${empty cookie.telephone.value ? &quot;&quot; : &quot;checked&quot; } name=&quot;remember&quot; id=&quot;remember&quot; /&gt;                            &lt;label for=&quot;remember&quot;&gt;记住用户名&lt;/label&gt;                        &lt;/td&gt;                    &lt;/tr&gt;                    &lt;tr&gt;                        &lt;td&gt;&amp;nbsp;&lt;/td&gt;                        &lt;td&gt;                            &lt;a href=&quot;javascript:;&quot;&gt;                                &lt;input id=&quot;regBtn&quot; value=&quot;立  即  登  录&quot;                                     type=&quot;button&quot; class=&quot;us_Submit_reg&quot;/&gt;                            &lt;/a&gt;                        &lt;/td&gt;                    &lt;/tr&gt;                    &lt;tr&gt;                        &lt;td&gt;&amp;nbsp;&lt;/td&gt;                        &lt;td&gt;                            &lt;a href=&quot;javascript:;&quot; onclick=&quot;location=&apos;register.jsp&apos;&quot;&gt;                                &lt;input id=&quot;loginBtn&quot; value=&quot;没有账号？立即注册&quot;                                     type=&quot;button&quot; class=&quot;us_Submit_log&quot; /&gt;                            &lt;/a&gt;                        &lt;/td&gt;                    &lt;/tr&gt;                &lt;/table&gt;            &lt;/form&gt;            &lt;div class=&quot;blank&quot;&gt;&lt;/div&gt;        &lt;/div&gt;    &lt;/div&gt;    &lt;%@include file=&quot;inc/footer.jsp&quot;%&gt; &lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p><img src="https://i.loli.net/2019/06/17/5d0754e063b3689081.png" alt></p><hr><hr><p><img src="https://i.loli.net/2019/06/17/5d075514e839a19367.png" alt></p><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;index-jsp&quot;&gt;&lt;a href=&quot;#index-jsp&quot; class=&quot;headerlink&quot; title=&quot;index.jsp&quot;&gt;&lt;/a&gt;index.jsp&lt;/h3&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="java电商项目" scheme="http://yoursite.com/tags/java%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>java商城项目（二）</title>
    <link href="http://yoursite.com/2019/06/16/estoretwo/"/>
    <id>http://yoursite.com/2019/06/16/estoretwo/</id>
    <published>2019-06-15T16:00:00.000Z</published>
    <updated>2019-06-17T08:37:31.667Z</updated>
    
    <content type="html"><![CDATA[<h3 id="导入-sql到Navicat-Premium出现乱码问题"><a href="#导入-sql到Navicat-Premium出现乱码问题" class="headerlink" title="导入.sql到Navicat Premium出现乱码问题"></a>导入.sql到Navicat Premium出现乱码问题</h3><blockquote><p>找到MySQL的安装路径，打开<strong>my.ini</strong>文件，更改如下地方<br><a id="more"></a></p></blockquote><pre><code>default-character-set=utf8character-set-server=utf8sql-mode=&quot;STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION改成sql-mode=&quot;NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&quot;</code></pre><p><strong>注：“utf8”而不是“utf-8”</strong>，修改成utf-8重新开启MySQL服务器可能造成失败，出现1067错误</p><h3 id="MySQL5-5-配置文件-my-ini-1067错误"><a href="#MySQL5-5-配置文件-my-ini-1067错误" class="headerlink" title="MySQL5.5 配置文件 my.ini 1067错误"></a>MySQL5.5 配置文件 my.ini 1067错误</h3><blockquote><p>打开my.ini文件</p></blockquote><p><img src="https://i.loli.net/2019/06/14/5d03565f8bad089354.png" alt></p><h3 id="MySql5-5-Command-Line-Client出现中文乱码，Navicat正常显示"><a href="#MySql5-5-Command-Line-Client出现中文乱码，Navicat正常显示" class="headerlink" title="MySql5.5 Command Line Client出现中文乱码，Navicat正常显示"></a>MySql5.5 Command Line Client出现中文乱码，Navicat正常显示</h3><p><img src="https://i.loli.net/2019/06/17/5d06e9338e18e44352.png" alt></p><p><img src="https://i.loli.net/2019/06/17/5d06e956d522520909.png" alt></p><h4 id="查看客服端编码格式"><a href="#查看客服端编码格式" class="headerlink" title="查看客服端编码格式"></a>查看客服端编码格式</h4><p><img src="https://i.loli.net/2019/06/17/5d06e99bad06394676.png" alt></p><h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><h6 id="临时解决办法"><a href="#临时解决办法" class="headerlink" title="临时解决办法"></a>临时解决办法</h6><blockquote><p>客服端更改字符集<br>查看字符集编码格式：<br><code>show variables like &#39;character_set_%&#39;;</code><br>临时更改字符集：<br><code>set names gbk；</code></p></blockquote><p><img src="https://i.loli.net/2019/06/17/5d06ea4a857cb30507.png" alt></p><blockquote><p>查看查询结果</p></blockquote><p><img src="https://i.loli.net/2019/06/17/5d06eb1e5b9cd42344.png" alt></p><blockquote><p><strong>注：这种只是临时解决办法，重启客服端将失效！</strong></p></blockquote><h6 id="长期解决办法"><a href="#长期解决办法" class="headerlink" title="长期解决办法"></a>长期解决办法</h6><blockquote><p>打开my.ini文件<br>更改如下：</p></blockquote><pre><code>[client]port=3306[mysql]default-character-set=gbk</code></pre><hr><pre><code>character-set-server=utf8</code></pre><hr><p>完整配置信息如下：</p><pre><code># MySQL Server Instance Configuration File# ----------------------------------------------------------------------# Generated by the MySQL Server Instance Configuration Wizard### Installation Instructions# ----------------------------------------------------------------------## On Linux you can copy this file to /etc/my.cnf to set global options,# mysql-data-dir/my.cnf to set server-specific options# (@localstatedir@ for this installation) or to# ~/.my.cnf to set user-specific options.## On Windows you should keep this file in the installation directory # of your server (e.g. C:\Program Files\MySQL\MySQL Server X.Y). To# make sure the server reads the config file use the startup option # &quot;--defaults-file&quot;. ## To run run the server from the command line, execute this in a # command line shell, e.g.# mysqld --defaults-file=&quot;C:\Program Files\MySQL\MySQL Server X.Y\my.ini&quot;## To install the server as a Windows service manually, execute this in a # command line shell, e.g.# mysqld --install MySQLXY --defaults-file=&quot;C:\Program Files\MySQL\MySQL Server X.Y\my.ini&quot;## And then execute this in a command line shell to start the server, e.g.# net start MySQLXY### Guildlines for editing this file# ----------------------------------------------------------------------## In this file, you can use all long options that the program supports.# If you want to know the options a program supports, start the program# with the &quot;--help&quot; option.## More detailed information about the individual options can also be# found in the manual.### CLIENT SECTION# ----------------------------------------------------------------------## The following options will be read by MySQL client applications.# Note that only client applications shipped by MySQL are guaranteed# to read this section. If you want your own MySQL client program to# honor these values, you need to specify it as an option during the# MySQL client library initialization.#[client]port=3306[mysql]default-character-set=gbk# SERVER SECTION# ----------------------------------------------------------------------## The following options will be read by the MySQL Server. Make sure that# you have installed the server correctly (see above) so it reads this # file.#[mysqld]# The TCP/IP Port the MySQL Server will listen onport=3306#Path to installation directory. All paths are usually resolved relative to this.basedir=&quot;C:/Program Files/MySQL/MySQL Server 5.5/&quot;#Path to the database rootdatadir=&quot;C:/ProgramData/MySQL/MySQL Server 5.5/Data/&quot;# The default character set that will be used when a new schema or table is# created and no character set is definedcharacter-set-server=utf8# The default storage engine that will be used when create new tables whendefault-storage-engine=MYISAM# Set the SQL mode to strict#sql-mode=&quot;STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&quot;sql-mode=&quot;NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&quot;# The maximum amount of concurrent sessions the MySQL server will# allow. One of these connections will be reserved for a user with# SUPER privileges to allow the administrator to login even if the# connection limit has been reached.max_connections=100# Query cache is used to cache SELECT results and later return them# without actual executing the same query once again. Having the query# cache enabled may result in significant speed improvements, if your# have a lot of identical queries and rarely changing tables. See the# &quot;Qcache_lowmem_prunes&quot; status variable to check if the current value# is high enough for your load.# Note: In case your tables change very often or if your queries are# textually different every time, the query cache may result in a# slowdown instead of a performance improvement.query_cache_size=0# The number of open tables for all threads. Increasing this value# increases the number of file descriptors that mysqld requires.# Therefore you have to make sure to set the amount of open files# allowed to at least 4096 in the variable &quot;open-files-limit&quot; in# section [mysqld_safe]table_cache=256# Maximum size for internal (in-memory) temporary tables. If a table# grows larger than this value, it is automatically converted to disk# based table This limitation is for a single table. There can be many# of them.tmp_table_size=18M# How many threads we should keep in a cache for reuse. When a client# disconnects, the client&apos;s threads are put in the cache if there aren&apos;t# more than thread_cache_size threads from before.  This greatly reduces# the amount of thread creations needed if you have a lot of new# connections. (Normally this doesn&apos;t give a notable performance# improvement if you have a good thread implementation.)thread_cache_size=8#*** MyISAM Specific options# The maximum size of the temporary file MySQL is allowed to use while# recreating the index (during REPAIR, ALTER TABLE or LOAD DATA INFILE.# If the file-size would be bigger than this, the index will be created# through the key cache (which is slower).myisam_max_sort_file_size=100G# If the temporary file used for fast index creation would be bigger# than using the key cache by the amount specified here, then prefer the# key cache method.  This is mainly used to force long character keys in# large tables to use the slower key cache method to create the index.myisam_sort_buffer_size=35M# Size of the Key Buffer, used to cache index blocks for MyISAM tables.# Do not set it larger than 30% of your available memory, as some memory# is also required by the OS to cache rows. Even if you&apos;re not using# MyISAM tables, you should still set it to 8-64M as it will also be# used for internal temporary disk tables.key_buffer_size=25M# Size of the buffer used for doing full table scans of MyISAM tables.# Allocated per thread, if a full scan is needed.read_buffer_size=64Kread_rnd_buffer_size=256K# This buffer is allocated when MySQL needs to rebuild the index in# REPAIR, OPTIMZE, ALTER table statements as well as in LOAD DATA INFILE# into an empty table. It is allocated per thread so be careful with# large settings.sort_buffer_size=256K#*** INNODB Specific options ***innodb_data_home_dir=&quot;F:/mysql/&quot;# Use this option if you have a MySQL server with InnoDB support enabled# but you do not plan to use it. This will save memory and disk space# and speed up some things.#skip-innodb# Additional memory pool that is used by InnoDB to store metadata# information.  If InnoDB requires more memory for this purpose it will# start to allocate it from the OS.  As this is fast enough on most# recent operating systems, you normally do not need to change this# value. SHOW INNODB STATUS will display the current amount used.innodb_additional_mem_pool_size=2M# If set to 1, InnoDB will flush (fsync) the transaction logs to the# disk at each commit, which offers full ACID behavior. If you are# willing to compromise this safety, and you are running small# transactions, you may set this to 0 or 2 to reduce disk I/O to the# logs. Value 0 means that the log is only written to the log file and# the log file flushed to disk approximately once per second. Value 2# means the log is written to the log file at each commit, but the log# file is only flushed to disk approximately once per second.innodb_flush_log_at_trx_commit=1# The size of the buffer InnoDB uses for buffering log data. As soon as# it is full, InnoDB will have to flush it to disk. As it is flushed# once per second anyway, it does not make sense to have it very large# (even with long transactions).innodb_log_buffer_size=1M# InnoDB, unlike MyISAM, uses a buffer pool to cache both indexes and# row data. The bigger you set this the less disk I/O is needed to# access data in tables. On a dedicated database server you may set this# parameter up to 80% of the machine physical memory size. Do not set it# too large, though, because competition of the physical memory may# cause paging in the operating system.  Note that on 32bit systems you# might be limited to 2-3.5G of user level memory per process, so do not# set it too high.innodb_buffer_pool_size=47M# Size of each log file in a log group. You should set the combined size# of log files to about 25%-100% of your buffer pool size to avoid# unneeded buffer pool flush activity on log file overwrite. However,# note that a larger logfile size will increase the time needed for the# recovery process.innodb_log_file_size=24M# Number of threads allowed inside the InnoDB kernel. The optimal value# depends highly on the application, hardware as well as the OS# scheduler properties. A too high value may lead to thread thrashing.innodb_thread_concurrency=10</code></pre><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;导入-sql到Navicat-Premium出现乱码问题&quot;&gt;&lt;a href=&quot;#导入-sql到Navicat-Premium出现乱码问题&quot; class=&quot;headerlink&quot; title=&quot;导入.sql到Navicat Premium出现乱码问题&quot;&gt;&lt;/a&gt;导入.sql到Navicat Premium出现乱码问题&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;找到MySQL的安装路径，打开&lt;strong&gt;my.ini&lt;/strong&gt;文件，更改如下地方&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="java电商项目" scheme="http://yoursite.com/tags/java%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>java商城项目——实现注册功能（三）</title>
    <link href="http://yoursite.com/2019/06/16/estorethree/"/>
    <id>http://yoursite.com/2019/06/16/estorethree/</id>
    <published>2019-06-15T16:00:00.000Z</published>
    <updated>2019-06-17T08:37:43.515Z</updated>
    
    <content type="html"><![CDATA[<h3 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h3><p><img src="https://i.loli.net/2019/06/16/5d06543012d0b51209.png" alt><br><a id="more"></a></p><h3 id="实现注册"><a href="#实现注册" class="headerlink" title="实现注册"></a>实现注册</h3><h4 id="view层"><a href="#view层" class="headerlink" title="view层"></a>view层</h4><h6 id="index-jsp"><a href="#index-jsp" class="headerlink" title="index.jsp"></a>index.jsp</h6><pre><code>&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;&lt;%String path = request.getContextPath();String basePath = request.getScheme()+&quot;://&quot;+request.getServerName()+&quot;:&quot;+request.getServerPort()+path+&quot;/&quot;;%&gt;&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;&lt;html&gt;  &lt;head&gt;&lt;base href=&quot;&lt;%=basePath%&gt;&quot;&gt;&lt;title&gt;电商&lt;/title&gt;    &lt;meta http-equiv=&quot;pragma&quot; content=&quot;no-cache&quot;&gt;    &lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot;&gt;    &lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot;&gt;    &lt;meta http-equiv=&quot;keywords&quot; content=&quot;keyword1,keyword2,keyword3&quot;&gt;    &lt;meta http-equiv=&quot;description&quot; content=&quot;This is my page&quot;&gt;    &lt;!--    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;styles.css&quot;&gt;    --&gt;  &lt;/head&gt;  &lt;body&gt;&lt;a href=&quot;register.jsp&quot;&gt; 注册 &lt;/a&gt;    &lt;br&gt;  &lt;/body&gt;&lt;/html&gt;</code></pre><h6 id="register-jsp"><a href="#register-jsp" class="headerlink" title="register.jsp"></a>register.jsp</h6><pre><code>    &lt;%@ page contentType=&quot;text/html; charset=UTF-8&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&lt;title&gt;注册&lt;/title&gt;&lt;%@include file=&quot;inc/common_head.jsp&quot;%&gt;&lt;script type=&quot;text/javascript&quot;&gt;    jQuery(function($) {        var cunzai = true;        $(&quot;#telephone&quot;).bind(&quot;keyup blur&quot;, function() {            var isTel = check_telephone(this.value);            if ( isTel ) {                // 发送ajax请求，验证是否已经注册                $.ajax({                    url: &quot;user?method=checkExists&amp;tel=&quot; + this.value,                    success: function(exists) {                        cunzai = exists == &quot;true&quot;;                        if ( exists == &quot;true&quot; ) {                            $(&quot;#telephone_notice&quot;)                            .attr(&quot;class&quot;, &quot;error&quot;)                            .text(&quot;该手机号已注册！&quot;);                        } else {                            $(&quot;#telephone_notice&quot;)                            .attr(&quot;class&quot;, &quot;ok&quot;)                            .text(&quot;&quot;);                        }                    }                });            }        });        var smsCodeOk = false;        $(&quot;#code_phone&quot;).bind(&quot;keyup blur&quot;, function() {            // 前端校验规则            var ok = check_tel_code(this.value);            if ( ok ) {                // 发送ajax请求，验证是否已经注册                $.ajax({                    url: &quot;user?method=checkSMSCode&amp;smsCode=&quot; + this.value,                    success: function(ok) {                        smsCodeOk = ok == &quot;true&quot;;                        if ( ok == &quot;false&quot; ) {                            $(&quot;#code_phone_notice&quot;)                            .attr(&quot;class&quot;, &quot;error&quot;)                            .text(&quot;短信验证码错误！&quot;);                        } else {                            $(&quot;#code_phone_notice&quot;)                            .attr(&quot;class&quot;, &quot;ok&quot;)                            .text(&quot;&quot;);                        }                    }                });            }        });        var imgCodeOk = false;        $(&quot;#captcha&quot;).bind(&quot;keyup blur&quot;, function() {            // 前端校验规则            var ok = check_captcha(this.value);            if ( ok ) {                // 发送ajax请求，验证是否已经注册                $.ajax({                    url: &quot;user?method=checkIMGCode&amp;imgCode=&quot; + this.value,                    success: function(ok) {                        imgCodeOk = ok == &quot;true&quot;;                        if ( ok == &quot;false&quot; ) {                            $(&quot;#captcha_notice&quot;)                            .attr(&quot;class&quot;, &quot;error&quot;)                            .text(&quot;验证码错误！&quot;);                        } else {                            $(&quot;#captcha_notice&quot;)                            .attr(&quot;class&quot;, &quot;ok&quot;)                            .text(&quot;&quot;);                        }                    }                });            }        });        $(&quot;#sendSMS&quot;).click(function() {            if ( cunzai ) {                return;            }            // 60秒倒计时            var time = 5;            var that = this;            var unSendAble = $(that).data(&quot;unSendAble&quot;);            // 第一次点击为undefined            if ( unSendAble ) {                return;            }            var tel = $(&quot;#telephone&quot;).val();            if ( !/^1[3456789]\d{9}$/.test(tel) ) {                return;            }            $(that)            .text(&quot;再次发送(&quot;+ time +&quot;)...&quot;)            .css({                &quot;background-color&quot;: &quot;gray&quot;,                border: &quot;1px solid #ccc&quot;            })            .data(&quot;unSendAble&quot;, true); // 不能发送            var intervalID = setInterval(function() {                $(that).text(&quot;再次发送(&quot;+ --time +&quot;)...&quot;);                if ( time == 0 ) {                    clearInterval(intervalID);                    $(that)                    .text(&quot;获取短信验证码&quot;)                    .data(&quot;unSendAble&quot;, false)                    .css({                        &quot;background-color&quot;: &quot;#0083FF&quot;,                        border: &quot;1px solid #2E82FF&quot;                    });                }            }, 1000);            $.ajax({                url: &quot;user?method=sendSMS&amp;tel=&quot; + tel,                dataType: &quot;json&quot;,                success: function(result) {                    // {&quot;Message&quot;:&quot;OK&quot;,&quot;RequestId&quot;:&quot;CDEF903F-9394-46A4-8B45-5A17439A6E0B&quot;,&quot;BizId&quot;:&quot;302210358584111842^0&quot;,&quot;Code&quot;:&quot;OK&quot;}                    /* if ( result.Message == &quot;OK&quot; ) {                        // 60秒倒计时                        // 按钮不能点击                        alert(&quot;发送成功！&quot;);                    } else {                        alert(&quot;发送失败，原因是：&quot; + result.Message);                    } */                }            });        });        $(&quot;#formUser&quot;).submit(function() {            return ( !cunzai &amp;&amp; imgCodeOk &amp;&amp; smsCodeOk &amp;&amp; register() );        });    });&lt;/script&gt;&lt;/head&gt;&lt;body&gt;    &lt;%@include file=&quot;inc/header.jsp&quot;%&gt;    &lt;div class=&quot;block block1&quot;&gt;        &lt;div class=&quot;blank&quot;&gt;&lt;/div&gt;        &lt;div class=&quot;usBox&quot;&gt;            &lt;div class=&quot;usBox_1&quot;&gt;                &lt;div class=&quot;login_tab&quot;&gt;                    &lt;ul&gt;                        &lt;li onclick=&quot;location.href=&apos;login.jsp&apos;;&quot;&gt;                            &lt;a href=&quot;javascript:;&quot;&gt;用户登录&lt;/a&gt;                        &lt;/li&gt;                        &lt;li class=&quot;active&quot;&gt;用户注册&lt;/li&gt;                    &lt;/ul&gt;                &lt;/div&gt;                &lt;form action=&quot;user?method=register&quot; method=&quot;post&quot; name=&quot;formUser&quot; id=&quot;formUser&quot;&gt;                    &lt;table width=&quot;100%&quot; border=&quot;0&quot; align=&quot;left&quot; cellpadding=&quot;5&quot;                        cellspacing=&quot;3&quot;&gt;                        &lt;tr&gt;                            &lt;td width=&quot;70px&quot; class=&quot;justify&quot;&gt;昵称&lt;/td&gt;                            &lt;td&gt;                                &lt;input name=&quot;nickname&quot; type=&quot;text&quot; id=&quot;nickname&quot; placeholder=&quot;请输入昵称&quot;                                     onkeyup=&quot;check_nickname(this.value);&quot;                                    onblur=&quot;check_nickname(this.value);&quot;                                     class=&quot;inputBg&quot; /&gt;                                &lt;span id=&quot;nickname_notice&quot;&gt;&lt;/span&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                        &lt;tr&gt;                            &lt;td class=&quot;justify&quot;&gt;密码&lt;/td&gt;                            &lt;td&gt;                                &lt;input name=&quot;password&quot; type=&quot;password&quot; id=&quot;password1&quot; placeholder=&quot;请输入密码&quot;                                     onkeyup=&quot;check_password(this.value);&quot;                                     onblur=&quot;check_password(this.value);&quot;                                     class=&quot;inputBg&quot; /&gt;                                &lt;span id=&quot;password_notice&quot;&gt;&lt;/span&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                        &lt;tr&gt;                            &lt;td class=&quot;justify&quot;&gt;确认密码&lt;/td&gt;                            &lt;td&gt;                                &lt;input name=&quot;confirm_password&quot; type=&quot;password&quot; id=&quot;conform_password&quot;                                    onkeyup=&quot;check_conform_password(this.value);&quot;                                    onblur=&quot;check_conform_password(this.value);&quot;                                    class=&quot;inputBg&quot; placeholder=&quot;请输入确认密码&quot;  /&gt;                                &lt;span id=&quot;conform_password_notice&quot;&gt;&lt;/span&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                        &lt;tr&gt;                            &lt;td class=&quot;justify&quot;&gt;手机号码&lt;/td&gt;                            &lt;td&gt;                                &lt;input type=&quot;text&quot; name=&quot;telephone&quot; id=&quot;telephone&quot;                                     class=&quot;inputBg&quot; placeholder=&quot;请输入手机号码&quot; /&gt;                                &lt;span id=&quot;telephone_notice&quot;&gt;&lt;/span&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                        &lt;tr&gt;                            &lt;td class=&quot;justify&quot;&gt;手机验证码&lt;/td&gt;                            &lt;td&gt;                                &lt;input type=&quot;text&quot; name=&quot;code_phone&quot; id=&quot;code_phone&quot;                                     class=&quot;inputBg&quot; placeholder=&quot;请输入手机验证码&quot; /&gt;&lt;a                                     href=&quot;javascript:;&quot; class=&quot;get_code&quot; id=&quot;sendSMS&quot;&gt;获取短信验证码&lt;/a&gt;                                &lt;span id=&quot;code_phone_notice&quot; style=&quot;margin-left:-132px;&quot;&gt;&lt;/span&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                        &lt;tr&gt;                            &lt;td class=&quot;justify&quot;&gt;图片验证码&lt;/td&gt;                            &lt;td&gt;                                &lt;input id=&quot;captcha&quot; name=&quot;captcha&quot; class=&quot;inputBg&quot;                                     placeholder=&quot;请输入图片验证码&quot; maxlength=&quot;4&quot;                                /&gt;&lt;img id=&quot;vcode&quot; src=&quot;validatecode.jsp&quot;                                     onclick=&quot;src=&apos;validatecode.jsp?&apos;+Math.random()&quot; /&gt;                                &lt;span id=&quot;captcha_notice&quot;&gt;&lt;/span&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                        &lt;tr&gt;                            &lt;td&gt;&amp;nbsp;&lt;/td&gt;                            &lt;td&gt;                                &lt;a href=&quot;javascript:;&quot;&gt;                                    &lt;input id=&quot;regBtn&quot; value=&quot;立  即  注  册&quot;                                         type=&quot;submit&quot; class=&quot;us_Submit_reg&quot;/&gt;                                &lt;/a&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                        &lt;tr&gt;                            &lt;td&gt;&amp;nbsp;&lt;/td&gt;                            &lt;td&gt;                                &lt;a href=&quot;javascript:;&quot; onclick=&quot;location=&apos;login.jsp&apos;&quot;&gt;                                    &lt;input id=&quot;loginBtn&quot; value=&quot;已有账号？立即登录&quot;                                         type=&quot;button&quot; class=&quot;us_Submit_log&quot; /&gt;                                &lt;/a&gt;                            &lt;/td&gt;                        &lt;/tr&gt;                        &lt;tr&gt;                            &lt;td colspan=&quot;2&quot;&gt;&amp;nbsp;&lt;/td&gt;                        &lt;/tr&gt;                    &lt;/table&gt;                &lt;/form&gt;                &lt;div class=&quot;blank&quot;&gt;&lt;/div&gt;            &lt;/div&gt;        &lt;/div&gt;    &lt;/div&gt;    &lt;%@include file=&quot;inc/footer.jsp&quot;%&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h4 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h4><pre><code>package xyz.ljcn.servlet;import java.io.IOException;import java.lang.reflect.Method;import java.net.URLEncoder;import javax.servlet.ServletException;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import xyz.ljcn.entity.User;@SuppressWarnings(&quot;all&quot;)public class BaseServlet extends HttpServlet{public User isLogin(HttpServletRequest req, HttpServletResponse resp) throws IOException {    User user = (User)req.getSession().getAttribute(&quot;loginUser&quot;);    // 如果是ajax请求，则请求头中会携带X-Requested-With，值为XMLHttpRequest    String xrw = req.getHeader(&quot;X-Requested-With&quot;);    if ( user == null &amp;&amp; xrw == null ) {        // 登录成功之后，跳转到之前所在的页面        // 从哪个页面跳转过来的        String referer = req.getHeader(&quot;Referer&quot;);        if ( referer != null ) {            referer = URLEncoder.encode(referer, &quot;UTF-8&quot;);            resp.sendRedirect(req.getContextPath() + &quot;/login.jsp?redirect=&quot; + referer);        } else {            resp.sendRedirect(req.getContextPath() + &quot;/login.jsp&quot;);        }    }    return user;}public void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {    request.setCharacterEncoding(&quot;UTF-8&quot;);    // servlet的路径?method=serlvet中的方法名    String methodName = request.getParameter(&quot;method&quot;);    Class clazz = this.getClass();    try {        Method method = clazz.getMethod(methodName, HttpServletRequest.class,                 HttpServletResponse.class);        method.invoke(this, request, response);    } catch (Exception e) {        e.printStackTrace();    }}</code></pre><p>}</p><hr><pre><code>package xyz.ljcn.servlet;import java.io.IOException;import javax.jws.WebService;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.Cookie;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.apache.commons.beanutils.BeanUtils;import xyz.ljcn.constants.Constants;import xyz.ljcn.entity.User;import xyz.ljcn.service.UserService;import xyz.ljcn.utils.BeanFactory;import com.aliyuncs.CommonRequest;import com.aliyuncs.CommonResponse;import com.aliyuncs.DefaultAcsClient;import com.aliyuncs.IAcsClient;import com.aliyuncs.exceptions.ClientException;import com.aliyuncs.exceptions.ServerException;import com.aliyuncs.http.MethodType;import com.aliyuncs.profile.DefaultProfile;@SuppressWarnings(&quot;all&quot;)@WebServlet(&quot;/user&quot;)public class UserServlet extends BaseServlet{public static void main(String[] args) {    DefaultProfile profile = DefaultProfile.getProfile(&quot;default&quot;, &quot;LTAIPihk73PHuXc9&quot;, &quot;tPmn9rcvDEhU67x6Eg8I2DQIVPLPe9&quot;);    IAcsClient client = new DefaultAcsClient(profile);    CommonRequest request = new CommonRequest();    //request.setProtocol(ProtocolType.HTTPS);    request.setMethod(MethodType.POST);    request.setDomain(&quot;dysmsapi.aliyuncs.com&quot;);    request.setVersion(&quot;2017-05-25&quot;);    request.setAction(&quot;SendSms&quot;);    request.putQueryParameter(&quot;PhoneNumbers&quot;, &quot;18105185234&quot;);    request.putQueryParameter(&quot;SignName&quot;, &quot;千峰商城&quot;);    request.putQueryParameter(&quot;TemplateCode&quot;, &quot;SMS_166096053&quot;);    request.putQueryParameter(&quot;TemplateParam&quot;, &quot;{\&quot;code\&quot;:\&quot;123456\&quot;}&quot;);    try {        CommonResponse response = client.getCommonResponse(request);        System.out.println(response.getData());    } catch (ServerException e) {        e.printStackTrace();    } catch (ClientException e) {        e.printStackTrace();    }}UserService service = BeanFactory.getBean(UserService.class);public void login(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {    String telephone = req.getParameter(&quot;telephone&quot;);    String password = req.getParameter(&quot;password&quot;);    User user = service.login(telephone, password);    if ( user == null ) {        resp.getWriter().write(&quot;err&quot;);    } else {        // 将用户对象保存到session中        req.getSession().setAttribute(Constants.USER.LOGINUSER, user);        // 记住用户名        String remember = req.getParameter(&quot;remember&quot;);        if ( remember != null ) {            Cookie c = new Cookie(&quot;telephone&quot;, telephone);            c.setMaxAge(9999999);            resp.addCookie(c);        } else {            Cookie c = new Cookie(&quot;telephone&quot;, null);            c.setMaxAge(0);            resp.addCookie(c);        }        resp.getWriter().write(&quot;ok&quot;);    }}public void register(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {    User user = new User();    try {        BeanUtils.populate(user, req.getParameterMap());        service.register(user);        resp.sendRedirect(req.getContextPath() + &quot;/login.jsp&quot;);    } catch (Exception e) {        e.printStackTrace();        throw new RuntimeException(e);    }}// 验证图片验证码是否正确public void checkIMGCode(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {    String imgCode1 = req.getParameter(&quot;imgCode&quot;);    String imgCode2 = (String)req.getSession().getAttribute(&quot;code&quot;);    if ( imgCode1 == null || &quot;&quot;.equals(imgCode1) || !imgCode1.equalsIgnoreCase(imgCode2) ) {        resp.getWriter().write(&quot;false&quot;);    } else {        resp.getWriter().write(&quot;true&quot;);    }}// 验证短信验证码是否正确public void checkSMSCode(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {    String smsCode1 = req.getParameter(&quot;smsCode&quot;);    String smsCode2 = (String)req.getSession().getAttribute(&quot;smsCode&quot;);    if ( smsCode1 == null || &quot;&quot;.equals(smsCode1) || !smsCode1.equalsIgnoreCase(smsCode2) ) {        resp.getWriter().write(&quot;false&quot;);    } else {        resp.getWriter().write(&quot;true&quot;);    }}// 验证手机号是否被注册public void checkExists(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {    String tel = req.getParameter(&quot;tel&quot;);    boolean exists = service.checkExists(tel);    resp.getWriter().write(exists + &quot;&quot;);}public void sendSMS(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {    // 生成6位验证码    String code = (Math.random()+&quot;&quot;).substring(2, 8);    // 将验证码保存到session中，验证使用    req.getSession().setAttribute(&quot;smsCode&quot;, code);    System.out.println(code+&quot;====================&quot;); }}</code></pre><h4 id="service"><a href="#service" class="headerlink" title="service"></a>service</h4><pre><code>package xyz.ljcn.service;import xyz.ljcn.entity.User;public interface UserService {boolean checkExists(String tel);void register(User user);User login(String telephone, String password); }</code></pre><h6 id="serviceImpl"><a href="#serviceImpl" class="headerlink" title="serviceImpl"></a>serviceImpl</h6><pre><code>package xyz.ljcn.service.Impl;import xyz.ljcn.dao.UserDao;import xyz.ljcn.entity.User;import xyz.ljcn.service.UserService;import xyz.ljcn.utils.BeanFactory;import xyz.ljcn.utils.MD5Utils;public class UserServiceImpl implements UserService{UserDao dao = BeanFactory.getBean(UserDao.class);@Overridepublic boolean checkExists(String tel) {    return dao.checkExists(tel);}@Overridepublic void register(User user) {    boolean exists = dao.checkExists(user.getTelephone());    if ( !exists ) {        String pwd = MD5Utils.str2MD5(user.getPassword());        user.setPassword(pwd);        dao.register(user);    }}@Overridepublic User login(String telephone, String password) {    // TODO Auto-generated method stub    return null; }}</code></pre><h3 id="Dao"><a href="#Dao" class="headerlink" title="Dao"></a>Dao</h3><pre><code>package xyz.ljcn.dao;import xyz.ljcn.entity.User;public interface UserDao {boolean checkExists(String tel);void register(User user);User login(String telephone, String password);}</code></pre><h6 id="DaoImpl"><a href="#DaoImpl" class="headerlink" title="DaoImpl"></a>DaoImpl</h6><pre><code>package xyz.ljcn.dao.Impl;import org.apache.commons.dbutils.QueryRunner;import org.apache.commons.dbutils.handlers.BeanHandler;import org.apache.commons.dbutils.handlers.ScalarHandler;import xyz.ljcn.dao.UserDao;import xyz.ljcn.entity.User;import xyz.ljcn.utils.JDBCUtils;public class UserDaoImpl implements UserDao{@Overridepublic boolean checkExists(String tel) {    try {        QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());        String sql = &quot;select count(*) from user where telephone=?&quot;;        return qr.query(sql, new ScalarHandler&lt;Long&gt;(), tel) &gt; 0;    } catch (Exception e) {        e.printStackTrace();        throw new RuntimeException(&quot;...&quot;);    }}@Overridepublic void register(User user) {    try {        QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());        String sql = &quot;insert into user values(null,?,?,?)&quot;;        qr.update(sql, user.getPassword(), user.getNickname(), user.getTelephone());    } catch (Exception e) {        e.printStackTrace();        throw new RuntimeException(&quot;...&quot;);    }}@Overridepublic User login(String telephone, String password) {    try {        QueryRunner qr = new QueryRunner(JDBCUtils.getDataSource());        String sql = &quot;select * from user where telephone=? and password=?&quot;;        return qr.query(sql, new BeanHandler&lt;User&gt;(User.class), telephone, password);    } catch (Exception e) {        e.printStackTrace();        throw new RuntimeException(&quot;...&quot;);   } }}</code></pre><h3 id="实体类"><a href="#实体类" class="headerlink" title="实体类"></a>实体类</h3><pre><code>package xyz.ljcn.entity;@SuppressWarnings(&quot;all&quot;)public class User {private Integer id;private String nickname;private String telephone;private String password;public Integer getId() {    return id;}public void setId(Integer id) {    this.id = id;}public String getNickname() {    return nickname;}public void setNickname(String nickname) {    this.nickname = nickname;}public String getTelephone() {    return telephone;}public void setTelephone(String telephone) {    this.telephone = telephone;}public String getPassword() {    return password;}public void setPassword(String password) {    this.password = password;}@Overridepublic String toString() {    return &quot;User [id=&quot; + id + &quot;, nickname=&quot; + nickname + &quot;, telephone=&quot;            + telephone + &quot;, password=&quot; + password + &quot;]&quot;; }}</code></pre><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><h5 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h5><p><img src="https://i.loli.net/2019/06/16/5d065947bc18778374.png" alt></p><h5 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h5><p><img src="https://i.loli.net/2019/06/16/5d065997e14c922413.png" alt></p><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;工作流程&quot;&gt;&lt;a href=&quot;#工作流程&quot; class=&quot;headerlink&quot; title=&quot;工作流程&quot;&gt;&lt;/a&gt;工作流程&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/06/16/5d06543012d0b51209.png&quot; alt&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="java电商项目" scheme="http://yoursite.com/tags/java%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>tomcat端口问题</title>
    <link href="http://yoursite.com/2019/06/13/java-errors/"/>
    <id>http://yoursite.com/2019/06/13/java-errors/</id>
    <published>2019-06-12T16:00:00.000Z</published>
    <updated>2019-06-30T03:25:52.377Z</updated>
    
    <content type="html"><![CDATA[<h3 id="导入项目出现的错误"><a href="#导入项目出现的错误" class="headerlink" title="导入项目出现的错误"></a>导入项目出现的错误</h3><h6 id="eclipse-Target-runtime-Apache-Tomcat-v8-0-is-not-defined"><a href="#eclipse-Target-runtime-Apache-Tomcat-v8-0-is-not-defined" class="headerlink" title="eclipse Target runtime Apache Tomcat v8.0 is not defined."></a>eclipse Target runtime Apache Tomcat v8.0 is not defined.</h6><p><img src="https://i.loli.net/2019/06/13/5d0238ae22bd469197.png" alt></p><blockquote><p>【项目】→【右键】→【build path】→【configure build path】→【libraries】 这里把你的tomcat 改成（Edit）你用的版本 然后 【项目】→【右键】→【Properties】→【Targeted-Runtimes】 把你的tomcat打勾，然后，保存关闭 。</p></blockquote><a id="more"></a><hr><blockquote><p>或者点击这个Problems，右击错误描述Delete</p></blockquote><h6 id="Java-compiler-level-does-not-match-the-version-of-the-installed-Java-project-facet"><a href="#Java-compiler-level-does-not-match-the-version-of-the-installed-Java-project-facet" class="headerlink" title="Java compiler level does not match the version of the installed Java project facet."></a>Java compiler level does not match the version of the installed Java project facet.</h6><blockquote><p>点击错误描述，右击选择Quick Fix选择合适的版本</p></blockquote><h6 id="项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）出现Oracle数据库相关字样"><a href="#项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）出现Oracle数据库相关字样" class="headerlink" title="项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）出现Oracle数据库相关字样"></a>项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）出现Oracle数据库相关字样</h6><blockquote><p>tomcat服务器的端口号和安装的Oracle数据库的某个服务端口冲突<br>解决办法有二：<br>1.更改tomcat端口号：tomcat文件→conf→server.xml<br><img src="https://i.loli.net/2019/06/13/5d023c201546437357.png" alt></p></blockquote><pre><code>` &lt;Connector port=&quot;8090&quot; redirectPort=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; URIEncoding=&quot;utf-8&quot;/&gt;`</code></pre><blockquote><p>2.关闭oracle端口号Ctrl+Alt+Delete，打开任务管理器→服务→找到相关端口关闭 </p></blockquote><h6 id="项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）-项目名-显示网络异常"><a href="#项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）-项目名-显示网络异常" class="headerlink" title="项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）/项目名/ 显示网络异常"></a>项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）/项目名/ 显示网络异常</h6><p>出现类似如下错误：<br><img src="https://i.loli.net/2019/06/13/5d023e1189e9215670.png" alt></p><blockquote><p>确保项目正常打开<br><img src="https://i.loli.net/2019/06/13/5d023ed83ddd851128.png" alt><br>但是浏览器不能正常显示项目的页面<br>先用IDE（集成开发环境里）的浏览器打开，以myeclipse为例<br>window→Show View→Web Brower<br>会在项目启动时在IDE中显示项目地址，可能主机名称不是localhost，是一些其他的名称</p></blockquote><h3 id="项目运行结果"><a href="#项目运行结果" class="headerlink" title="项目运行结果"></a>项目运行结果</h3><p>浏览器输入项目的地址，正确显示页面，如下<br><img src="https://i.loli.net/2019/06/13/5d0240a16986349610.png" alt></p><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;导入项目出现的错误&quot;&gt;&lt;a href=&quot;#导入项目出现的错误&quot; class=&quot;headerlink&quot; title=&quot;导入项目出现的错误&quot;&gt;&lt;/a&gt;导入项目出现的错误&lt;/h3&gt;&lt;h6 id=&quot;eclipse-Target-runtime-Apache-Tomcat-v8-0-is-not-defined&quot;&gt;&lt;a href=&quot;#eclipse-Target-runtime-Apache-Tomcat-v8-0-is-not-defined&quot; class=&quot;headerlink&quot; title=&quot;eclipse Target runtime Apache Tomcat v8.0 is not defined.&quot;&gt;&lt;/a&gt;eclipse Target runtime Apache Tomcat v8.0 is not defined.&lt;/h6&gt;&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/06/13/5d0238ae22bd469197.png&quot; alt&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;【项目】→【右键】→【build path】→【configure build path】→【libraries】 这里把你的tomcat 改成（Edit）你用的版本 然后 【项目】→【右键】→【Properties】→【Targeted-Runtimes】 把你的tomcat打勾，然后，保存关闭 。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="tomcat" scheme="http://yoursite.com/tags/tomcat/"/>
    
  </entry>
  
  <entry>
    <title>java商城项目（一）</title>
    <link href="http://yoursite.com/2019/06/13/estoreone/"/>
    <id>http://yoursite.com/2019/06/13/estoreone/</id>
    <published>2019-06-12T16:00:00.000Z</published>
    <updated>2019-06-13T12:28:50.789Z</updated>
    
    <content type="html"><![CDATA[<h3 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h3><p>eclipse/myeclipse+mysql+tomcat7以上+jdk1.8+Redis<br><a id="more"></a></p><h3 id="项目目录结构"><a href="#项目目录结构" class="headerlink" title="项目目录结构"></a>项目目录结构</h3><p><img src="https://i.loli.net/2019/06/13/5d0237eaeb19e80735.png" alt></p><h3 id="导入项目出现的错误"><a href="#导入项目出现的错误" class="headerlink" title="导入项目出现的错误"></a>导入项目出现的错误</h3><h6 id="eclipse-Target-runtime-Apache-Tomcat-v8-0-is-not-defined"><a href="#eclipse-Target-runtime-Apache-Tomcat-v8-0-is-not-defined" class="headerlink" title="eclipse Target runtime Apache Tomcat v8.0 is not defined."></a>eclipse Target runtime Apache Tomcat v8.0 is not defined.</h6><p><img src="https://i.loli.net/2019/06/13/5d0238ae22bd469197.png" alt></p><blockquote><p>【项目】→【右键】→【build path】→【configure build path】→【libraries】 这里把你的tomcat 改成（Edit）你用的版本 然后 【项目】→【右键】→【Properties】→【Targeted-Runtimes】 把你的tomcat打勾，然后，保存关闭 。</p></blockquote><hr><blockquote><p>或者点击这个Problems，右击错误描述Delete</p></blockquote><h6 id="Java-compiler-level-does-not-match-the-version-of-the-installed-Java-project-facet"><a href="#Java-compiler-level-does-not-match-the-version-of-the-installed-Java-project-facet" class="headerlink" title="Java compiler level does not match the version of the installed Java project facet."></a>Java compiler level does not match the version of the installed Java project facet.</h6><blockquote><p>点击错误描述，右击选择Quick Fix选择合适的版本</p></blockquote><h6 id="项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）出现Oracle数据库相关字样"><a href="#项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）出现Oracle数据库相关字样" class="headerlink" title="项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）出现Oracle数据库相关字样"></a>项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）出现Oracle数据库相关字样</h6><blockquote><p>tomcat服务器的端口号和安装的Oracle数据库的某个服务端口冲突<br>解决办法有二：<br>1.更改tomcat端口号：tomcat文件→conf→server.xml<br><img src="https://i.loli.net/2019/06/13/5d023c201546437357.png" alt></p></blockquote><pre><code>` &lt;Connector port=&quot;8090&quot; redirectPort=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; URIEncoding=&quot;utf-8&quot;/&gt;`</code></pre><blockquote><p>2.关闭oracle端口号Ctrl+Alt+Delete，打开任务管理器→服务→找到相关端口关闭 </p></blockquote><h6 id="项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）-项目名-显示网络异常"><a href="#项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）-项目名-显示网络异常" class="headerlink" title="项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）/项目名/ 显示网络异常"></a>项目运行成功，游览器输入localhost：8080（自己的tomcat端口号）/项目名/ 显示网络异常</h6><p>出现类似如下错误：<br><img src="https://i.loli.net/2019/06/13/5d023e1189e9215670.png" alt></p><blockquote><p>确保项目正常打开<br><img src="https://i.loli.net/2019/06/13/5d023ed83ddd851128.png" alt><br>但是浏览器不能正常显示项目的页面<br>先用IDE（集成开发环境里）的浏览器打开，以myeclipse为例<br>window→Show View→Web Brower<br>会在项目启动时在IDE中显示项目地址，可能主机名称不是localhost，是一些其他的名称</p></blockquote><h3 id="项目运行结果"><a href="#项目运行结果" class="headerlink" title="项目运行结果"></a>项目运行结果</h3><p><img src="https://i.loli.net/2019/06/13/5d0240a16986349610.png" alt></p><p><img src="https://i.loli.net/2019/06/13/5d0241401e5a793512.png" alt></p><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;运行环境&quot;&gt;&lt;a href=&quot;#运行环境&quot; class=&quot;headerlink&quot; title=&quot;运行环境&quot;&gt;&lt;/a&gt;运行环境&lt;/h3&gt;&lt;p&gt;eclipse/myeclipse+mysql+tomcat7以上+jdk1.8+Redis&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="java电商项目" scheme="http://yoursite.com/tags/java%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>Python函数与模块</title>
    <link href="http://yoursite.com/2019/06/09/Python-function-module/"/>
    <id>http://yoursite.com/2019/06/09/Python-function-module/</id>
    <published>2019-06-08T16:00:00.000Z</published>
    <updated>2019-06-09T10:52:47.625Z</updated>
    
    <content type="html"><![CDATA[<h3 id="什么是函数"><a href="#什么是函数" class="headerlink" title="什么是函数"></a>什么是函数</h3><p>把实现某一特定功能的相关语句按某种格式组织在一起形成一个程序单元，这样的一个程序单元叫做函数（function）。<br>函数有时也被成为例程或过程。<br><a id="more"></a><br>使用函数的目的：</p><ul><li>分解问题，降低编程难度</li><li>代码重用</li></ul><h5 id="函数的定义格式"><a href="#函数的定义格式" class="headerlink" title="函数的定义格式"></a>函数的定义格式</h5><p>def 函数名([参数列表])：<br>  [函数体]<br>return[返回值列表]</p><blockquote><p>【例】</p></blockquote><pre><code>def say_hello():  print(&quot;hello world!&quot;)say_hello()</code></pre><blockquote><p>运行结果：</p></blockquote><pre><code>hello world!Process finished with exit code 0</code></pre><blockquote><p>【例】定义函数计算最大值</p></blockquote><pre><code>def maxnum(x,y):    if x&gt;y:        return x    elif x==y:        return &quot;两数相等&quot;    else:        return y（# a=input(&quot;input a:&quot;)）（# b=input(&quot;input b:&quot;)）a,b=input(&quot;input a b:&quot;).split(&quot;-&quot;)print(maxnum(a,b))</code></pre><blockquote><p>运行结果：</p></blockquote><pre><code>input a b:12-3434Process finished with exit code 0</code></pre><h3 id="模块及其应用"><a href="#模块及其应用" class="headerlink" title="模块及其应用"></a>模块及其应用</h3><h5 id="模块的定义及引用"><a href="#模块的定义及引用" class="headerlink" title="模块的定义及引用"></a>模块的定义及引用</h5><p>Python模块（module）是一个python文件，以.py结尾，包含了Python对象定义和Python语句。</p><blockquote><p>例 support.py</p></blockquote><pre><code>def print_func():    print(str)    print(&quot;hello&quot;)    return </code></pre><h5 id="模块的分类"><a href="#模块的分类" class="headerlink" title="模块的分类"></a>模块的分类</h5><ul><li>系统内置模块，例如：sys、time、json模块</li><li>自定义模块</li><li>开源模块，通过<code>pip install</code>进行安装</li></ul><p>注：自定义模块命名不能和系统内置的模块重名，否则无法再导入系统模块</p><h5 id="模块的使用"><a href="#模块的使用" class="headerlink" title="模块的使用"></a>模块的使用</h5><blockquote><p>模块的引用</p></blockquote><p>方式一：import 模块名 </p><pre><code>import mathprint(math.cos(60))</code></pre><p>方式二：from 模块名 import 函数名</p><pre><code>from math import cosprint(cos(60)</code></pre><h3 id="包"><a href="#包" class="headerlink" title="包"></a>包</h3><p>每一个Python的包目录下面都会有名为<strong>init</strong>.py的特殊文件，该文件可以为空，但必须存在。</p><blockquote><p>包、模块、函数之间的关系</p><p><strong>包</strong>（<strong>模块1</strong>（<strong>函数</strong>，类），<strong>模块2</strong>（<strong>函数</strong>，类），……）</p></blockquote><h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><blockquote><p>1.验证哥德巴赫猜想：一个不小于7的偶数可以表示两个素数的和</p></blockquote><pre><code>import mathdef isprime(n):  # 判断素数    if n == 1:    return Falseelif n == 2:    return Trueelse:    for i in range(2, int(math.sqrt(n) + 1)):        if n % i == 0:            return False            return Truedef thonsand(n):  # 生成若干个素数，返回素数list    a = []    for i in range(1, n + 1):        if isprime(i):        a.append(i)        return a&quot;&quot;&quot;利用前面的两个函数生成n范围内的素数列表两层for循环，两个迭代变量之和如果等于参数n就加入列表中循环完所有的情况后返回列表，并打印输出。&quot;&quot;&quot;def gdbh(n):    a = []    ls = thonsand(n)    for i in ls:        for j in ls:            if n == i + j:                a.append(i)                a.append(j)                return als2 = gdbh(8)ls3 = gdbh(152)print(ls2)print(ls3)</code></pre><blockquote><p>运行结果：</p></blockquote><pre><code>[3, 5, 5, 3][3, 149, 13, 139, 43, 109, 73, 79, 79, 73, 109, 43, 139, 13, 149, 3]Process finished with exit code 0   </code></pre><blockquote><p>2.编写一个判断字符串是否是回文的函数</p></blockquote><pre><code>s = input(&apos;请输入一个字符串：&apos;)if not s:    print(&apos;请不要输入空字符串！&apos;)    s = input(&apos;请重新输入一个字符串：&apos;)a = len(s)i = 0count = 1while i &lt;= (a/2):    if s[i] == s[a-i-1]:        count = 1        i += 1    else:        count = 0        breakif count == 1:    print(&apos;您所输入的字符串是回文&apos;)else:    print(&apos;您所输入的字符串不是回文&apos;)</code></pre><blockquote><p>运行结果：</p></blockquote><pre><code>请输入一个字符串：&gt;? 请不要输入空字符串！请重新输入一个字符串：&gt;? www您所输入的字符串是回文exit()Process finished with exit code 0</code></pre><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;什么是函数&quot;&gt;&lt;a href=&quot;#什么是函数&quot; class=&quot;headerlink&quot; title=&quot;什么是函数&quot;&gt;&lt;/a&gt;什么是函数&lt;/h3&gt;&lt;p&gt;把实现某一特定功能的相关语句按某种格式组织在一起形成一个程序单元，这样的一个程序单元叫做函数（function）。&lt;br&gt;函数有时也被成为例程或过程。&lt;br&gt;
    
    </summary>
    
      <category term="Python" scheme="http://yoursite.com/categories/Python/"/>
    
    
      <category term="Python 第三章：Python函数与模块" scheme="http://yoursite.com/tags/Python-%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9APython%E5%87%BD%E6%95%B0%E4%B8%8E%E6%A8%A1%E5%9D%97/"/>
    
  </entry>
  
  <entry>
    <title>Python概述</title>
    <link href="http://yoursite.com/2019/06/08/Python-Summarize/"/>
    <id>http://yoursite.com/2019/06/08/Python-Summarize/</id>
    <published>2019-06-07T16:00:00.000Z</published>
    <updated>2019-06-08T10:00:30.227Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Python语言类型"><a href="#Python语言类型" class="headerlink" title="Python语言类型"></a>Python语言类型</h3><p>Python是一种计算进程序设计语言，是一种解释型、面向对象、动态数据类型的高级程序设计语言。<br>最初，被设计用于编写自动化脚本（shell）。<br>Python的创始人是荷兰人——Guido van Rossum（吉多 范罗苏姆），于1989年开始写Python语言的编译器</p><a id="more"></a><h3 id="Python的运用领域"><a href="#Python的运用领域" class="headerlink" title="Python的运用领域"></a>Python的运用领域</h3><ul><li>Web开发</li><li>网络爬虫</li><li>计算与数据分析</li><li>人工智能</li><li>自动化运维</li><li>云计算</li><li>网络编程</li><li>游戏开发</li></ul><h3 id="Python语言特点"><a href="#Python语言特点" class="headerlink" title="Python语言特点"></a>Python语言特点</h3><h5 id="Python语言的优点"><a href="#Python语言的优点" class="headerlink" title="Python语言的优点"></a>Python语言的优点</h5><ol><li>简单</li><li>易学</li><li>开源</li><li>可移植性强</li><li>解释性</li><li>可扩展性、可嵌入性</li><li>丰富的第三方库</li><li>代码规范（采用强制缩进的方式）</li></ol><h5 id="Python运行机制"><a href="#Python运行机制" class="headerlink" title="Python运行机制"></a>Python运行机制</h5><p>Python先把代码（.py文件）编译成字节码文件，交给字节码虚拟机，然后虚拟机一条一条的执行字节码指令，从而完成程序的执行。<br>字节码在Python虚拟机程序里对应的是PyCodeObject对象。.pyc文件是字节码在磁盘上的表现形式。</p><h5 id="Python注释"><a href="#Python注释" class="headerlink" title="Python注释"></a>Python注释</h5><ul><li>单行注释（# xxx）</li><li>多行注释（’’’ xxx ‘’’）</li><li>中文注释<ul><li>“#coding=utf-8”</li><li>“#coding=gbk”</li></ul></li></ul><h5 id="import语句"><a href="#import语句" class="headerlink" title="import语句"></a>import语句</h5><p>1.import（关键字） module1,module2……（模块）</p><pre><code>import math</code></pre><ul><li>import导入模块建议顺序<ul><li>Python标准库模块</li><li>Python第三方模块</li><li>自定义模块</li></ul></li></ul><p>2.from-import语句<br>from module import name</p><pre><code>from math import floor</code></pre><h5 id="Python编程规范"><a href="#Python编程规范" class="headerlink" title="Python编程规范"></a>Python编程规范</h5><p>1.缩进<br>2.每个import语句值导入一个模块，最好按标准库、扩展库、自定义库的顺序进行导入<br>3.最好在每个类、函数定义和一段完整的功能代码之后加空格<br>4.如果语句过长，使用续行符“\”或者是“（）”<br>5.用“（）”来避免由于优先级造成的错误<br>6.注释</p><h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><p><strong>题目：利用input输入三个数值，并求和（float函数可以将字符串转换成单精度浮点数）</strong></p><pre><code> 输入数字 Python 3 通过 input() 获取的任何内容都是 str（字符串）类型。str1 = input(&apos;请输入第1个数：&apos;)str2 = input(&apos;请输入第2个数：&apos;)str3 = input(&apos;请输入第3个数：&apos;)用 int() 函数强制将 str 转换成 intnum1 = float(str1)num2 = float(str2)num3= float(str3)加法运算并打印print(&apos;{0} + {1} +{2} = {3}&apos;.format(num1, num2,num3,num1 + num2+num3))</code></pre><p><strong>运行结果：</strong></p><pre><code>请输入第1个数：1请输入第2个数：2请输入第3个数：3 1.0 + 2.0 +3.0 = 6.0Process finished with exit code 0</code></pre><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Python语言类型&quot;&gt;&lt;a href=&quot;#Python语言类型&quot; class=&quot;headerlink&quot; title=&quot;Python语言类型&quot;&gt;&lt;/a&gt;Python语言类型&lt;/h3&gt;&lt;p&gt;Python是一种计算进程序设计语言，是一种解释型、面向对象、动态数据类型的高级程序设计语言。&lt;br&gt;最初，被设计用于编写自动化脚本（shell）。&lt;br&gt;Python的创始人是荷兰人——Guido van Rossum（吉多 范罗苏姆），于1989年开始写Python语言的编译器&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="http://yoursite.com/categories/Python/"/>
    
    
      <category term="Python 第一章：Python概述" scheme="http://yoursite.com/tags/Python-%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9APython%E6%A6%82%E8%BF%B0/"/>
    
  </entry>
  
  <entry>
    <title>Python语言基础</title>
    <link href="http://yoursite.com/2019/06/08/Python-BasicKnowledge/"/>
    <id>http://yoursite.com/2019/06/08/Python-BasicKnowledge/</id>
    <published>2019-06-07T16:00:00.000Z</published>
    <updated>2019-06-09T02:56:56.503Z</updated>
    
    <content type="html"><![CDATA[<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><pre><code>import mathprint(math.pi)</code></pre><blockquote><p>结果:3.141592653589793</p></blockquote><a id="more"></a><h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><ul><li>数字<ul><li>int(整型)【32位操作系统，整数是32位，取值范围为-2^31~2^31-1;64位操作系统，整数是64位，取值范围为-2^63~2^63-1】</li><li>long(长整型)</li><li>float（浮点型）</li></ul></li><li>bool（布尔）</li><li>字符串</li><li>列表、元祖、集合、字典</li></ul><p><img src="https://i.loli.net/2019/06/08/5cfb8db55e04d85827.png" alt></p><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h5 id="变量的命名"><a href="#变量的命名" class="headerlink" title="变量的命名"></a>变量的命名</h5><ul><li>变量名只能包含字母、数字、下划线。变量名可以字母、下划线开头，不能以数字开头。</li><li>变量名不能白喊空格，可以使用下划线进行分割</li><li>不能讲关键字作为变量名</li></ul><h3 id="运算符与表达式"><a href="#运算符与表达式" class="headerlink" title="运算符与表达式"></a>运算符与表达式</h3><p>1.算术运算符<br>2.比较（关系）运算符<br>3.赋值运算符<br>4.逻辑运算符<br>5.按位运算符<br>6.成员运算符<br>7.身份运算符</p><h3 id="程序控制语句"><a href="#程序控制语句" class="headerlink" title="程序控制语句"></a>程序控制语句</h3><ul><li>顺序控制语句</li><li>选择控制语句</li><li>循环控制语句</li></ul><h5 id="if-elif-else语句"><a href="#if-elif-else语句" class="headerlink" title="if-elif-else语句"></a>if-elif-else语句</h5><blockquote><p>【例】根据年龄段收取费用：<br>4岁以下免费<br>4~18岁收费50元<br>18以上收费100元</p></blockquote><pre><code>age=eval(input(&quot;输入您的年龄:&quot;))if age&lt;4:   price=0elif age&lt;18:   price=50else :   price=100print(&quot;您的年龄为&quot;&quot;需要缴纳&quot;+str(price)+&quot;元&quot;) </code></pre><blockquote><p>运行结果：<br>输入您的年龄:12<br>您的年龄为需要缴纳50元</p></blockquote><h5 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h5><blockquote><p>【例】</p></blockquote><pre><code>list=[&quot;www&quot;,&quot;ljcn&quot;,&quot;xyz&quot;]for i in list:     print(i)</code></pre><blockquote><p>运行结果：</p></blockquote><pre><code>C:\python3.7\python.exe F:/Pyworkspace/test01/test01.pywwwljcnxyzProcess finished with exit code 0</code></pre><h5 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h5><pre><code>i=eval(input(&quot;请输入一位数：&quot;))while i&lt;6:    print(i)    i+=1    print(i)</code></pre><blockquote><p>运行结果 ：</p></blockquote><pre><code>请输入一位数：3344556  Process finished with exit code 0   </code></pre><h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><blockquote><ol><li>猜字游戏：提前设定一个100内的整数，根据用户输入给出提示，比实际数大了还是小了。如果用户猜对了，输出“恭喜你猜对了”并结束游戏</li></ol></blockquote><pre><code>secret = 66print(&apos;------猜数字游戏！-----&apos;)guess = 0while guess != secret:  temp = input(&apos;请输入数字：&apos;)  guess = int(temp) if guess &gt; secret:    print(&apos;您输入的数字大了！&apos;) elif guess &lt;secret:    print(&apos;您输入的数字小了！&apos;) else:  print(&apos;恭喜，您猜对了！&apos;)  print(&apos;游戏结束，再见！^_^&apos;)</code></pre><blockquote><p>运行结果：</p></blockquote><pre><code>------猜数字游戏！-----请输入数字一位100以内的数字：33您输入的数字小了！请输入数字一位100以内的数字：99您输入的数字大了！请输入数字一位100以内的数字：66恭喜，您猜对了！游戏结束，再见！^_^Process finished with exit code 0</code></pre><blockquote><p>2.使用while循环，打印十个100以内的随机数，并在循环结束后打印最大值和最小值</p></blockquote><pre><code>import numpy as npnum=0while num&lt;1: num+=1 list=np.random.randint(1,100,size=10) print(&quot;————随机生成10个1-100的数————&quot;) print(list) print(&quot;————生成有序集合————&quot;) list2=sorted(list) print(list2) print(&quot;————打印最大值————&quot;) print(list2[9])</code></pre><blockquote><p>运行结果：</p></blockquote><pre><code>————随机生成10个1-100的数————[89 22 57 44 65 47 63 66 57 10]————生成有序集合————[10, 22, 44, 47, 57, 57, 63, 65, 66, 89]————打印最大值————89Process finished with exit code 0</code></pre><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;常量&quot;&gt;&lt;a href=&quot;#常量&quot; class=&quot;headerlink&quot; title=&quot;常量&quot;&gt;&lt;/a&gt;常量&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;import math
print(math.pi)
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;结果:3.141592653589793&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Python" scheme="http://yoursite.com/categories/Python/"/>
    
    
      <category term="Python 第二章：Python语言基础" scheme="http://yoursite.com/tags/Python-%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9APython%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>XShell远程连接阿里云服务器（CentOS）</title>
    <link href="http://yoursite.com/2019/06/06/xshell-aliyun/"/>
    <id>http://yoursite.com/2019/06/06/xshell-aliyun/</id>
    <published>2019-06-05T16:00:00.000Z</published>
    <updated>2019-06-06T03:11:11.525Z</updated>
    
    <content type="html"><![CDATA[<h3 id="XShell"><a href="#XShell" class="headerlink" title="XShell"></a>XShell</h3><p>Xshell是一个强大的安全终端模拟软件，它支持SSH1, SSH2, 以及Microsoft Windows 平台的TELNET 协议。Xshell 通过互联网到远程主机的安全连接以及它创新性的设计和特色帮助用户在复杂的网络环境中享受他们的工作。<br>Xshell可以在Windows界面下用来访问远端不同系统下的服务器，从而比较好的达到远程控制终端的目的。除此之外，其还有丰富的外观配色方案以及样式选择。（百度百科）</p><a id="more"></a><h3 id="获取XShell"><a href="#获取XShell" class="headerlink" title="获取XShell"></a>获取XShell</h3><p>XShell是一款收费软件，现在已经更新到XSHell6了。</p><p><img src="https://i.loli.net/2019/06/06/5cf87ab319b3768005.png" alt></p><ul><li>你可以免费试用30天</li><li>你可以花钱购买</li><li>如果只是学习，申请一个家庭/学校免费版的就够了</li></ul><h3 id="家庭-学校免费版获取"><a href="#家庭-学校免费版获取" class="headerlink" title="家庭/学校免费版获取"></a>家庭/学校免费版获取</h3><p><a href="https://www.netsarang.com/zh/free-for-home-school/" target="_blank" rel="noopener">获取地址</a></p><p><img src="https://i.loli.net/2019/06/06/5cf87c1ccea3c98736.png" alt></p><ul><li>填写姓名</li><li>填写邮件（会通过邮箱的方式发送下载链接）</li><li>选择你的需求<ul><li>XShell</li><li>Xftp</li><li>两者</li></ul></li></ul><h3 id="远程连接（秘钥连接）"><a href="#远程连接（秘钥连接）" class="headerlink" title="远程连接（秘钥连接）"></a>远程连接（秘钥连接）</h3><p>有多种连接方式，这里只介绍采用秘钥连接的方式进行演示。其中，秘钥连接有服务器端生成秘钥，XShell导入秘钥文件；另外一种是XShell生成秘钥，服务器导入秘钥文件。</p><h4 id="第一种，XShell生成秘钥（一连接远程主机，进行SSH用户身份验证）"><a href="#第一种，XShell生成秘钥（一连接远程主机，进行SSH用户身份验证）" class="headerlink" title="第一种，XShell生成秘钥（一连接远程主机，进行SSH用户身份验证）"></a>第一种，XShell生成秘钥（一连接远程主机，进行SSH用户身份验证）</h4><ul><li>浏览-&gt;用户秘钥-&gt;生成 <ul><li>生成后记得保存*.pem文件</li></ul></li></ul><p><img src="https://i.loli.net/2019/06/06/5cf87f571744118337.png" alt></p><ul><li>服务器端导入秘钥文件</li></ul><p><img src="https://i.loli.net/2019/06/06/5cf881940817d69889.png" alt></p><h4 id="第二种，服务器端生成秘钥文件，XShell导入秘钥文件进行连接登录"><a href="#第二种，服务器端生成秘钥文件，XShell导入秘钥文件进行连接登录" class="headerlink" title="第二种，服务器端生成秘钥文件，XShell导入秘钥文件进行连接登录"></a>第二种，服务器端生成秘钥文件，XShell导入秘钥文件进行连接登录</h4><ul><li>远程连接-&gt;秘钥管理</li></ul><p><img src="https://i.loli.net/2019/06/06/5cf882623732343127.png" alt></p><ul><li><p>XShell导入秘钥文件</p></li><li><p>预览-&gt;文件<br><img src="https://i.loli.net/2019/06/06/5cf8832de4fb126614.png" alt></p></li><li><p>输入密码</p></li><li><p>连接成功</p></li></ul><p><img src="https://i.loli.net/2019/06/06/5cf883f41e45494561.png" alt></p><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;XShell&quot;&gt;&lt;a href=&quot;#XShell&quot; class=&quot;headerlink&quot; title=&quot;XShell&quot;&gt;&lt;/a&gt;XShell&lt;/h3&gt;&lt;p&gt;Xshell是一个强大的安全终端模拟软件，它支持SSH1, SSH2, 以及Microsoft Windows 平台的TELNET 协议。Xshell 通过互联网到远程主机的安全连接以及它创新性的设计和特色帮助用户在复杂的网络环境中享受他们的工作。&lt;br&gt;Xshell可以在Windows界面下用来访问远端不同系统下的服务器，从而比较好的达到远程控制终端的目的。除此之外，其还有丰富的外观配色方案以及样式选择。（百度百科）&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="XShell" scheme="http://yoursite.com/tags/XShell/"/>
    
      <category term="服务器" scheme="http://yoursite.com/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>Android新闻客户端</title>
    <link href="http://yoursite.com/2019/06/01/Android%E6%96%B0%E9%97%BB%E5%AE%A2%E6%88%B7%E7%AB%AF/"/>
    <id>http://yoursite.com/2019/06/01/Android新闻客户端/</id>
    <published>2019-05-31T16:00:00.000Z</published>
    <updated>2019-06-01T03:11:05.641Z</updated>
    
    <content type="html"><![CDATA[<h3 id="什么是AppServ"><a href="#什么是AppServ" class="headerlink" title="什么是AppServ"></a>什么是AppServ</h3><p>AppServ 是 PHP 网页架站工具组合包，作者将一些网络上免费的架站资源重新包装成单一的安装程序，以方便初学者快速完成架站，AppServ 所包含的软件有：Apache、Apache Monitor、PHP、MySQL、phpMyAdmin等。为帮助大家能够迅速的在本地试用EcShop软件，我们编写如下文档。如果您的本地机器没有安装过apache、php、mysql等系统，那么用这个软件则可以让你迅速搭建完整的底层环境。（百度百科）</p><a id="more"></a><h3 id="AppServ的获取与安装"><a href="#AppServ的获取与安装" class="headerlink" title="AppServ的获取与安装"></a>AppServ的获取与安装</h3><p><a href="https://www.appserv.org/en/" target="_blank" rel="noopener">下载地址</a></p><p><img src="https://i.loli.net/2019/06/01/5cf1c8259925e65456.png" alt="AppServ官网"></p><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><ul><li>点击“DOWNLOAD”→解压→双击.exe文件安装</li><li>安装成功效果</li></ul><p><img src="https://i.loli.net/2019/06/01/5cf1c9a43c9a884481.png" alt="安装成功"></p><ul><li>浏览器输入 localhost 检查是否安装成功</li></ul><p><img src="https://i.loli.net/2019/06/01/5cf1ceeab71de77330.png" alt></p><h3 id="AppServ结构简单介绍"><a href="#AppServ结构简单介绍" class="headerlink" title="AppServ结构简单介绍"></a>AppServ结构简单介绍</h3><ul><li><p>AppServ结构</p><ul><li><p>Apache24是Apache的一个服务器</p><ul><li>Apache Web Server的目录结构<ul><li>apache / bin主Apache程序。</li><li>apache / conf Apache配置文件。</li><li>apache / error Apache错误模板（仅在Apache2.x上找到）。</li><li>apache / icons Apache图标。</li><li>apache / logs Apache日志文件。</li><li>apache / modules Apache模块。</li></ul></li></ul></li><li><p>Mysql是数据库（如果本地已安装mysql数据库，确定这里数据库的版本信息，防止因版本冲突造成的不便）</p><ul><li>mysql / bin主MySQL数据库执行文件。</li><li>mysql / data MySQL数据库存储。</li><li>mysql / share MySQL错误消息。</li></ul></li><li><p>php目录结构</p><ul><li>php PHP命令行执行和DLL库。</li><li>用于PHP的php / ext PECL PHP扩展（仅限PHP5）。</li><li>php / extension用于PHP的PECL PHP扩展（仅在PHP 4上找到）。</li><li>用于PHP的php / PEAR PEAR框架组件。</li></ul></li><li><p>www文件存储的目录结构。</p><ul><li>www网页文件的目录根。</li><li>www / cgi-bin CGI文件目录。</li><li>www / phpMyAdmin phpMyAdmin程序目录。</li><li>www / appserv AppServ文件，您可以在安装后将其删除。</li><li>www / index.php AppServ index.php文件，您可以在安装后将其删除。<br><img src="https://i.loli.net/2019/06/01/5cf1caaf4e49e49620.png" alt></li></ul></li></ul></li></ul><h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><h5 id="数据库准备"><a href="#数据库准备" class="headerlink" title="数据库准备"></a>数据库准备</h5><p><img src="https://i.loli.net/2019/06/01/5cf1d026e9abb86178.png" alt></p><p><img src="https://i.loli.net/2019/06/01/5cf1d082dd38a25231.png" alt="数据库主界面"></p><p><em>接下来，设计数据库或者导入已有的数据（这里不做进一步说明）</em></p><h5 id="将数据库中的数据转化为json数据（PHP语言）"><a href="#将数据库中的数据转化为json数据（PHP语言）" class="headerlink" title="将数据库中的数据转化为json数据（PHP语言）"></a>将数据库中的数据转化为json数据（PHP语言）</h5><ul><li>连接数据库的文件xxx.php</li><li>具体用于创建json数据的xxx.php<br><strong>将PHP文件放入www目录下</strong></li></ul><p><img src="https://i.loli.net/2019/06/01/5cf1d253f256391320.png" alt="PHP文件存放目录"></p><ul><li>输入<a href="http://localhost/NewsDemo/getNewsJSON.php" target="_blank" rel="noopener">http://localhost/NewsDemo/getNewsJSON.php</a><br><img src="https://i.loli.net/2019/06/01/5cf1d2ec60ca142524.png" alt="返回的json数据"></li></ul><h3 id="Android客户端实现"><a href="#Android客户端实现" class="headerlink" title="Android客户端实现"></a>Android客户端实现</h3><p>源码：搜索关注微信公众号“<strong>原味工厂</strong>”，或文章结尾扫码关注！回复：<strong>20190601</strong>， 即可获取！</p><h5 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h5><p><img src="https://i.loli.net/2019/06/01/5cf1e7c5e965c79467.png" alt="Android项目结构"></p><h5 id="更改服务器地址"><a href="#更改服务器地址" class="headerlink" title="更改服务器地址"></a>更改服务器地址</h5><p><img src="https://i.loli.net/2019/06/01/5cf1e88c4a21921766.png" alt></p><ul><li><del><a href="http://localhost/NewsDemo/getNewsJSON.php" target="_blank" rel="noopener">http://localhost/NewsDemo/getNewsJSON.php</a></del></li><li><del><a href="http://127.0.0.1/NewsDemo/getNewsJSON.php" target="_blank" rel="noopener">http://127.0.0.1/NewsDemo/getNewsJSON.php</a></del></li><li><del><a href="http://10.0.0.2/NewsDemo/getNewsJSON.php" target="_blank" rel="noopener">http://10.0.0.2/NewsDemo/getNewsJSON.php</a></del></li><li><a href="http://10.0.2.2/NewsDemo/getNewsJSON.php" target="_blank" rel="noopener">http://10.0.2.2/NewsDemo/getNewsJSON.php</a><h3 id="运行效果"><a href="#运行效果" class="headerlink" title="运行效果"></a>运行效果</h3><h5 id="更改logo效果"><a href="#更改logo效果" class="headerlink" title="更改logo效果"></a>更改logo效果</h5><img src="https://i.loli.net/2019/06/01/5cf1eac357dcc12751.png" alt><h5 id="更改背景图效果"><a href="#更改背景图效果" class="headerlink" title="更改背景图效果"></a>更改背景图效果</h5><img src="https://i.loli.net/2019/06/01/5cf1eaeea972c51390.png" alt><h5 id="若无效果"><a href="#若无效果" class="headerlink" title="若无效果"></a>若无效果</h5><img src="https://i.loli.net/2019/06/01/5cf1ebcc798c919626.png" alt></li></ul><p>检查服务器地址是否正确</p><h5 id="成功返回数据库数据"><a href="#成功返回数据库数据" class="headerlink" title="成功返回数据库数据"></a>成功返回数据库数据</h5><p><img src="https://i.loli.net/2019/06/01/5cf1ec5c038b891770.png" alt></p><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;什么是AppServ&quot;&gt;&lt;a href=&quot;#什么是AppServ&quot; class=&quot;headerlink&quot; title=&quot;什么是AppServ&quot;&gt;&lt;/a&gt;什么是AppServ&lt;/h3&gt;&lt;p&gt;AppServ 是 PHP 网页架站工具组合包，作者将一些网络上免费的架站资源重新包装成单一的安装程序，以方便初学者快速完成架站，AppServ 所包含的软件有：Apache、Apache Monitor、PHP、MySQL、phpMyAdmin等。为帮助大家能够迅速的在本地试用EcShop软件，我们编写如下文档。如果您的本地机器没有安装过apache、php、mysql等系统，那么用这个软件则可以让你迅速搭建完整的底层环境。（百度百科）&lt;/p&gt;
    
    </summary>
    
      <category term="PHP" scheme="http://yoursite.com/categories/PHP/"/>
    
      <category term="Android" scheme="http://yoursite.com/categories/PHP/Android/"/>
    
    
      <category term="AppServ" scheme="http://yoursite.com/tags/AppServ/"/>
    
      <category term="Android" scheme="http://yoursite.com/tags/Android/"/>
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>AppServ登录phpMyAdmin错误</title>
    <link href="http://yoursite.com/2019/05/31/AppServ/"/>
    <id>http://yoursite.com/2019/05/31/AppServ/</id>
    <published>2019-05-30T16:00:00.000Z</published>
    <updated>2019-05-31T09:54:20.462Z</updated>
    
    <content type="html"><![CDATA[<h3 id="错误信息"><a href="#错误信息" class="headerlink" title="错误信息"></a>错误信息</h3><blockquote><p><em>#2002——&amp;mdash；服务器没有响应（或本地服务器的套接字没有正确设置）。</em></p></blockquote><a id="more"></a><p><img src="https://i.loli.net/2019/05/31/5cf0e7be61fe150750.png" alt="错误预览"></p><h3 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h3><ul><li>网上有很多与#2002相关的解决方案，主要的是更改相关配置</li></ul><blockquote><p>AppServ→www→phpMyAdmin→config.sample.inc</p></blockquote><p><img src="https://i.loli.net/2019/05/31/5cf0f013aee1f33466.png" alt></p><ul><li>造成#2020错误的原因有很多，这种方式只能解决造成这一错误的一种情况</li></ul><p><img src="https://i.loli.net/2019/05/31/5cf0f618e37c196304.png" alt></p><ul><li>按照网上的方法添加了相关信息，但是问题没有得到解决</li></ul><h3 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h3><ul><li>由于我电脑里还装了MySQL的其他版本，猜想是端口冲突造成的</li></ul><p><img src="https://i.loli.net/2019/05/31/5cf0f750bf75029948.png" alt></p><ul><li>找到了问题的根源，没有<strong>开启MySQL服务</strong><ul><li>mysql57是服务器内置的MySQL</li><li>MySQL是自己安装的MySQL版本 </li></ul></li></ul><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul><li>开启MySQL57，问题解决</li></ul><p><img src="https://i.loli.net/2019/05/31/5cf0f88e397a766500.png" alt></p><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;错误信息&quot;&gt;&lt;a href=&quot;#错误信息&quot; class=&quot;headerlink&quot; title=&quot;错误信息&quot;&gt;&lt;/a&gt;错误信息&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;#2002——&amp;amp;mdash；服务器没有响应（或本地服务器的套接字没有正确设置）。&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="PHP" scheme="http://yoursite.com/categories/PHP/"/>
    
      <category term="Android" scheme="http://yoursite.com/categories/PHP/Android/"/>
    
    
      <category term="AppServ" scheme="http://yoursite.com/tags/AppServ/"/>
    
  </entry>
  
  <entry>
    <title>AppServ登录phpMyAdmin错误</title>
    <link href="http://yoursite.com/2019/05/31/AppServ#2002/"/>
    <id>http://yoursite.com/2019/05/31/AppServ#2002/</id>
    <published>2019-05-30T16:00:00.000Z</published>
    <updated>2019-05-31T10:03:07.792Z</updated>
    
    <content type="html"><![CDATA[<h3 id="错误信息"><a href="#错误信息" class="headerlink" title="错误信息"></a>错误信息</h3><blockquote><p><em>#2002——&amp;mdash；服务器没有响应（或本地服务器的套接字没有正确设置）。</em></p></blockquote><a id="more"></a><p><img src="https://i.loli.net/2019/05/31/5cf0e7be61fe150750.png" alt="错误预览"></p><h3 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h3><ul><li>网上有很多与#2002相关的解决方案，主要的是更改相关配置</li></ul><blockquote><p>AppServ→www→phpMyAdmin→config.sample.inc</p></blockquote><p><img src="https://i.loli.net/2019/05/31/5cf0f013aee1f33466.png" alt></p><ul><li>造成#2020错误的原因有很多，这种方式只能解决造成这一错误的一种情况</li></ul><p><img src="https://i.loli.net/2019/05/31/5cf0f618e37c196304.png" alt></p><ul><li>按照网上的方法添加了相关信息，但是问题没有得到解决</li></ul><h3 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h3><ul><li>由于我电脑里还装了MySQL的其他版本，猜想是端口冲突造成的</li></ul><p><img src="https://i.loli.net/2019/05/31/5cf0f750bf75029948.png" alt></p><ul><li>找到了问题的根源，没有<strong>开启MySQL服务</strong><ul><li>mysql57是服务器内置的MySQL</li><li>MySQL是自己安装的MySQL版本 </li></ul></li></ul><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul><li>开启MySQL57，问题解决</li></ul><p><img src="https://i.loli.net/2019/05/31/5cf0f88e397a766500.png" alt></p><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>   更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;错误信息&quot;&gt;&lt;a href=&quot;#错误信息&quot; class=&quot;headerlink&quot; title=&quot;错误信息&quot;&gt;&lt;/a&gt;错误信息&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;#2002——&amp;amp;mdash；服务器没有响应（或本地服务器的套接字没有正确设置）。&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="PHP" scheme="http://yoursite.com/categories/PHP/"/>
    
      <category term="Android" scheme="http://yoursite.com/categories/PHP/Android/"/>
    
    
      <category term="AppServ" scheme="http://yoursite.com/tags/AppServ/"/>
    
  </entry>
  
  <entry>
    <title>阿里云（CentOS）安装MySQL</title>
    <link href="http://yoursite.com/2019/05/29/Linux-MySQL/"/>
    <id>http://yoursite.com/2019/05/29/Linux-MySQL/</id>
    <published>2019-05-28T16:00:00.000Z</published>
    <updated>2019-05-29T11:01:55.132Z</updated>
    
    <content type="html"><![CDATA[<h3 id="可以通过输入“sudo-su-root”切换至root账号"><a href="#可以通过输入“sudo-su-root”切换至root账号" class="headerlink" title="可以通过输入“sudo su root”切换至root账号"></a>可以通过输入“sudo su root”切换至root账号</h3><p>下面的一些操作都是在root用户下完成的。</p><pre><code>[admin@izwz9gwtq4y4p311j81i6fz ~]$ sudo su root[root@izwz9gwtq4y4p311j81i6fz admin]#   </code></pre><a id="more"></a><h3 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h3><p>①安装MySQL官方的Yum Repository</p><pre><code>[root@izwz9gwtq4y4p311j81i6fz admin]# wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm </code></pre><p>②下载rpm包</p><pre><code>[root@izwz9gwtq4y4p311j81i6fz admin]#yum -y install mysql57-community-release-el7-10.noarch.rpm</code></pre><p>③安装MySQL服务</p><pre><code>[root@izwz9gwtq4y4p311j81i6fz admin]#yum -y install mysql-community-server</code></pre><p>④启动mysql服务</p><pre><code>[root@izwz9gwtq4y4p311j81i6fz admin]#systemctl start  mysqld.service</code></pre><p>⑤查看状态</p><pre><code>[root@izwz9gwtq4y4p311j81i6fz admin]#systemctl status mysqld.service</code></pre><h3 id="初始化设置"><a href="#初始化设置" class="headerlink" title="初始化设置"></a>初始化设置</h3><p>①查看原始密码</p><pre><code>[root@izwz9gwtq4y4p311j81i6fz admin]#vi /var/log/mysqld.log</code></pre><p>找到：</p><pre><code>2019-05-29T00:47[Note] A temporary password is generated for root@localhost: At#qydoUG2ae</code></pre><p>初始化密码：At#qydoUG2ae</p><p>②更改初始密码</p><pre><code>[root@izwz9gwtq4y4p311j81i6fz admin]#mysqladmin -u root -p&apos;旧密码&apos; password &apos;新密码&apos;</code></pre><ul><li>注：若密码设置简单，或有警告和提示密码更改失败</li></ul><pre><code>vim /etc/my.cnf， 增加这么一行validate_password=off</code></pre><ul><li>重启MySQL</li></ul><pre><code>systemctl restart mysqld</code></pre><h3 id="登录MySQL"><a href="#登录MySQL" class="headerlink" title="登录MySQL"></a>登录MySQL</h3><pre><code>[root@izwz9gwtq4y4p311j81i6fz admin]#mysql -u root -p</code></pre><ul><li>提示输入密码<code>Enter password:</code></li><li>登录成功：</li></ul><p><img src="https://i.loli.net/2019/05/29/5cee64829d48670558.png" alt></p><h3 id="退出MySQL"><a href="#退出MySQL" class="headerlink" title="退出MySQL"></a>退出MySQL</h3><pre><code>mysql&gt;exit</code></pre><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>更多精彩内容，欢迎扫码关注“<strong><em>原味工厂</em></strong>”</p><p><img src="https://i.loli.net/2019/05/29/5cee65d5eb54688976.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;可以通过输入“sudo-su-root”切换至root账号&quot;&gt;&lt;a href=&quot;#可以通过输入“sudo-su-root”切换至root账号&quot; class=&quot;headerlink&quot; title=&quot;可以通过输入“sudo su root”切换至root账号&quot;&gt;&lt;/a&gt;可以通过输入“sudo su root”切换至root账号&lt;/h3&gt;&lt;p&gt;下面的一些操作都是在root用户下完成的。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[admin@izwz9gwtq4y4p311j81i6fz ~]$ sudo su root
[root@izwz9gwtq4y4p311j81i6fz admin]#   
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="Linux-MySQL" scheme="http://yoursite.com/tags/Linux-MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MyBatis与传统JDBC</title>
    <link href="http://yoursite.com/2019/05/21/MyBatis%EF%BC%881%EF%BC%89/"/>
    <id>http://yoursite.com/2019/05/21/MyBatis（1）/</id>
    <published>2019-05-20T16:00:00.000Z</published>
    <updated>2019-05-22T12:28:45.332Z</updated>
    
    <content type="html"><![CDATA[<h3 id="传统JDBC开发模式的缺陷"><a href="#传统JDBC开发模式的缺陷" class="headerlink" title="传统JDBC开发模式的缺陷"></a>传统JDBC开发模式的缺陷</h3><p>JDBC（Java DataBase Connectivity）即“Java数据库连接”，是一种提供连接数据库，使用SQL语句操作数据库数据的技术的标准Java API。<br>在传统Jsp/Servlet开发模式下，一般直接使用JDBC进行数据库的连接和操作。引入相关数据库驱动jar包，创建数据库连接类，该类数据库驱动的加载、数据库连接参数配置、连接对象的获取以及连接对象的关闭操作。</p><a id="more"></a><h4 id="硬编码问题"><a href="#硬编码问题" class="headerlink" title="硬编码问题"></a>硬编码问题</h4><pre><code>//定义mysql的数据库驱动程序public static final String DBDRIVER=&quot;org.gjt.mm.mysql.Driver&quot;;//定义mysql的数据库连接地址public static final String DBURL=&quot;jdbc.mysql://localhost:3306/my&quot;;//数据库连接用户名public static final String DBUSER=&quot;root&quot;;//连接密码public static final String DBPASS=&quot;root&quot;;</code></pre><p>可以看到，数据库驱动程序名称、数据库连接地址、数据库账号及密码都是硬编码到程序中。</p><h6 id="什么是硬编码"><a href="#什么是硬编码" class="headerlink" title="什么是硬编码"></a>什么是硬编码</h6><p>将程序中的外部变量值，使用赋值语句写死在程序中，当需要修改时，要修改源码并重新编译。扩展性差。</p><h3 id="待优化问题"><a href="#待优化问题" class="headerlink" title="待优化问题"></a>待优化问题</h3><ul><li><strong>连接参数，sql语句的硬编码问题</strong>：将sql语句配置在xml或其他非java的配置文件，可以避免修改配置后，重新编译java文件。</li><li><strong> 数据库的频繁连接与断开 </strong>：使用数据库连接池来管理数据的连接。</li><li><strong> 查询结果集取数据的硬编码 </strong>：使用一种机制，将查询出的结果集自动映射成java对象，无需手动配置。</li></ul><h3 id="什么是MyBatis？"><a href="#什么是MyBatis？" class="headerlink" title="什么是MyBatis？"></a>什么是MyBatis？</h3><p>MyBatis是一款优秀的持久层框架，它支持定制化SQL存储过程以及高级映射，MyBatis避免了所有的JDBC代码和手动设置参数以及获取结果集。MyBatis可以使用简单的XML或注解来配置合映射原生信息，将接口和Java的pojos（Plain Old Java Objects 普通Java对象）映射成数据库中的记录。</p><h4 id="mybatis特点-："><a href="#mybatis特点-：" class="headerlink" title="mybatis特点 ："></a>mybatis特点 ：</h4><p>采用配置文件动态管理sql语句，含有输入、输出映射机制以及数据库连接池配置的持久层框架。</p><h3 id="mybatis整体架构"><a href="#mybatis整体架构" class="headerlink" title="mybatis整体架构"></a>mybatis整体架构</h3><ul><li>数据源配置文件（SqlMapConfig.xml）<strong>(文件名可更改)</strong></li><li>sql映射配置文件（xxxMapper.xml）<strong>(文件名可更改)</strong></li><li>会话工厂(SqlSessionFactory)</li><li>会话(SqlSession)</li><li>执行器(EXcutor)</li><li>底层封装对象(Statement)</li></ul><h3 id="mybatis运行流程"><a href="#mybatis运行流程" class="headerlink" title="mybatis运行流程"></a>mybatis运行流程</h3><p>mybatis的整个运行流程仅仅围绕数据库连接池配置文件SqlMapConfig.xml以及sql映射配置文件Mapper.xml开展。</p><hr><p>首先，SqlSessionFactory会话工厂会通过Resources资源信息加载对象获取SqlMapConfig.xml配置文件信息；<br>然后，产生可以与数据库进行交互的会话实例类SqlSession。会话实例类SqlSession可以根据Mapper位置文件的SQL配置，去执行相应的增删改查操作。而在会话实例类SqlSession内部，是通过执行器Executor（基本执行器和缓存执行器）对数据库进行操作。执行器与数据库交互依靠的是底层封装对象Mappered Statement，它封装了从Mapper文件中读取的信息（包括Sql语句、执行参数、输出结果类型）。<br>通过执行器Executor与底层封装对象Mappered Statement的结合，MyBatis实现了与数据库进行交互的功能。<br><img src="https://i.loli.net/2019/05/22/5ce539766b0d485309.png" alt="mybatis.png"></p><ul><li>SqlMapConfig.xml:配置数据库连接信息、事务等。配置了包含SQL语句的映射文件集合（Mapper文件）</li><li>Mappere.xml：配置SQL语句、输入参数和输出结果类型等配置信息</li><li>SqlSessionFactory：会话工厂，根据资源加载类获取数据库配置文件信息而生成。作用：生成SqlSession会话对象</li><li>SqlSession:由SqlSessionFactory生成。作用：操作数据库</li><li>Executor：执行器（分为基本执行器和缓存执行器），是一个接口，为SqlSession执行数据库操作</li><li>Mappered Statement：底层封装对象，对操作数据库的信息进行封装（包括SQL语句、输入参数、输出结果类型）</li><li>输入参数类型：<ul><li>Java简单类型</li><li>HashMap类型</li><li>pojo自定义包装类型</li></ul></li><li>输出结果类型:<ul><li>Java简单类型</li><li>HashMap类型</li><li>pojo自定义包装类型</li></ul></li></ul><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p><strong><br>更多精彩内容，欢迎扫码关注微信公众号</strong><br><img src="https://i.loli.net/2019/05/22/5ce53d3bbfd3511773.jpg" alt="8454929096314a5.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;传统JDBC开发模式的缺陷&quot;&gt;&lt;a href=&quot;#传统JDBC开发模式的缺陷&quot; class=&quot;headerlink&quot; title=&quot;传统JDBC开发模式的缺陷&quot;&gt;&lt;/a&gt;传统JDBC开发模式的缺陷&lt;/h3&gt;&lt;p&gt;JDBC（Java DataBase Connectivity）即“Java数据库连接”，是一种提供连接数据库，使用SQL语句操作数据库数据的技术的标准Java API。&lt;br&gt;在传统Jsp/Servlet开发模式下，一般直接使用JDBC进行数据库的连接和操作。引入相关数据库驱动jar包，创建数据库连接类，该类数据库驱动的加载、数据库连接参数配置、连接对象的获取以及连接对象的关闭操作。&lt;/p&gt;
    
    </summary>
    
      <category term="MyBatis" scheme="http://yoursite.com/categories/MyBatis/"/>
    
    
      <category term="MyBatis（1）" scheme="http://yoursite.com/tags/MyBatis%EF%BC%881%EF%BC%89/"/>
    
  </entry>
  
</feed>
